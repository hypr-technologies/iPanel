System.register(["./page_layout-legacy.js?v=1752142539265","./index-legacy127.js?v=1752142539265","./index-legacy.js?v=1752142539265","./public-legacy.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1752142539265","./vue-legacy.js?v=1752142539265","./soft-legacy2.js?v=1752142539265","./useModal-legacy2.js?v=1752142539265","./site-legacy3.js?v=1752142539265","./index-legacy190.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1752142539265","./naive-legacy.js?v=1752142539265","./common-legacy.js?v=1752142539265","./__commonjsHelpers__-legacy.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1752142539265","./soft-legacy.js?v=1752142539265"],(function(e,t){"use strict";var i,a,l,n,s,o,c,d,u,r,p,x,m,_,f,h,v,y,W,w,g,S,b,R,$,k,j,U,P,C,N,q,z,O,V,E,L,A,B,D,F,T,H,J,M,Q,X,Z,G,I,K,Y,ee,te,ie,ae,le,ne,se,oe,ce,de,ue,re;return{setters:[e=>{i=e.d,a=e.bk,l=e.c$,n=e.a,s=e.w,o=e.m,c=e.x},e=>{d=e._},e=>{u=e._},e=>{r=e._,p=e.d,x=e.e,m=e.b,_=e.h,f=e.f,h=e.u},e=>{v=e._},e=>{y=e._},e=>{W=e._},e=>{w=e.k,g=e.t,S=e.P,b=e.e,R=e.U,$=e.X,k=e.Q,j=e.a2,U=e.V,P=e.l,C=e.W,N=e.j,q=e.a3,z=e.v,O=e.N,V=e.$,E=e.r,L=e.F,A=e.o,B=e.a1,D=e._,F=e.u},e=>{T=e.u},e=>{H=e.u},e=>{J=e.s,M=e.a,Q=e.b,X=e.g,Z=e.c,G=e.d,I=e.e},e=>{K=e._},e=>{Y=e._},e=>{ee=e.cz,te=e.c1,ie=e.cB,ae=e.cC,le=e.aq,ne=e.c_,se=e.c$,oe=e.bZ,ce=e.b$,de=e._,ue=e.cA,re=e.ay},null,null,null,null],execute:function(){const pe={class:"p-20px"},xe={class:"flex-1"},me={class:"flex items-center h-32px"},_e={class:"flex items-center h-32px"},fe={class:"w-320px mt-6px"},he={class:"flex-1"},ve={class:"flex items-center h-32px"},ye={class:"flex items-center h-32px"},We={class:"w-320px mt-6px"},we={class:"text-error"},ge=w({__name:"index",props:{row:{},onRefresh:{}},setup(e,{expose:t}){const a=e,l=g(a,"row"),{t:n}=S(),s=b({html:!1,html_fast:!1,js:!1,picture:!1}),o=b({type:"default",text:""}),c=b({type:"default",text:""});(()=>{if(!l.value)return;const{crawler:e}=l.value;e&&(s.html=e.html,s.picture=e.picture,e.htmlnew&&(o.type=e.htmlnew.type,o.text=e.htmlnew.text),e.picturenew&&(c.type=e.picturenew.type,c.text=e.picturenew.text))})();const d=async()=>{const e=(()=>{const e={site:l.value.siteName,html:s.html,html_fast:!1,js:!1,picture:s.picture,htmlnew:O(o),picturenew:O(c)};return ne(l.value.crawler,e,((e,t)=>{if(i(e))return JSON.stringify(se(e,t))}))})();await J(e),a.onRefresh?.()};return t({onConfirm:async({hide:e})=>(s.html||s.picture?p({title:n("Public.Confirm.Title"),width:408,content:()=>k("div",{class:"relative pb-40px"},[k("div",null,[N("效果：每次访问网页内容随机加密、有效防止爬虫")]),k("div",null,[N("影响：开启后会导致比之前流量增加1倍")]),k("div",null,[N("建议：线上业务建议不要开启")]),k(r,{class:"absolute left-[-21px] bottom-0 mt-16px "},{default:()=>[k("li",{class:"text-error"},[N("当前的功能为测试功能建议不要在线上业务开启！！")])]})]),onConfirm:async({hide:t})=>{await d(),t(),e()}}):(await d(),e()),!1)}),(e,t)=>{const i=te,a=ae,l=ie,n=le,d=ee,u=Y;return $(),R("div",pe,[k(u,{"label-width":"160px"},{default:j((()=>[k(d,{label:e.$t("Waf.Site.ReptileProtection.index_1")},{default:j((()=>[U("div",xe,[U("div",me,[k(i,{value:C(s).html,"onUpdate:value":t[0]||(t[0]=e=>C(s).html=e)},null,8,["value"])]),P(U("div",_e,[k(l,{value:C(o).type,"onUpdate:value":t[1]||(t[1]=e=>C(o).type=e)},{default:j((()=>[k(a,{value:"default"},{default:j((()=>[N(q(e.$t("Waf.Site.ReptileProtection.index_2")),1)])),_:1}),k(a,{value:"text"},{default:j((()=>[N(q(e.$t("Waf.Site.ReptileProtection.index_3")),1)])),_:1})])),_:1},8,["value"])],512),[[z,C(s).html]]),P(U("div",fe,[k(n,{value:C(o).text,"onUpdate:value":t[2]||(t[2]=e=>C(o).text=e),placeholder:e.$t("Waf.Site.ReptileProtection.index_4")},null,8,["value","placeholder"])],512),[[z,C(s).html&&"text"===C(o).type]])])])),_:1},8,["label"]),k(d,{label:e.$t("Waf.Site.ReptileProtection.index_5")},{default:j((()=>[U("div",he,[U("div",ve,[k(i,{value:C(s).picture,"onUpdate:value":t[3]||(t[3]=e=>C(s).picture=e)},null,8,["value"])]),P(U("div",ye,[k(l,{value:C(c).type,"onUpdate:value":t[4]||(t[4]=e=>C(c).type=e)},{default:j((()=>[k(a,{value:"default"},{default:j((()=>[N(q(e.$t("Waf.Site.ReptileProtection.index_6")),1)])),_:1}),k(a,{value:"text"},{default:j((()=>[N(q(e.$t("Waf.Site.ReptileProtection.index_7")),1)])),_:1})])),_:1},8,["value"])],512),[[z,C(s).picture]]),P(U("div",We,[k(n,{value:C(c).text,"onUpdate:value":t[5]||(t[5]=e=>C(c).text=e),placeholder:e.$t("Waf.Site.ReptileProtection.index_8")},null,8,["value","placeholder"])],512),[[z,C(s).picture&&"text"===C(c).type]])])])),_:1},8,["label"])])),_:1}),k(r,{class:"mt-16px"},{default:j((()=>[U("li",we,q(e.$t("Waf.Site.ReptileProtection.index_9")),1),U("li",null,[U("b",null,q(e.$t("Waf.Site.ReptileProtection.index_10")),1),N(q(e.$t("Waf.Site.ReptileProtection.index_11")),1)]),U("li",null,[U("b",null,q(e.$t("Waf.Site.ReptileProtection.index_12")),1),N(q(e.$t("Waf.Site.ReptileProtection.index_13")),1)]),U("li",null,[U("b",null,q(e.$t("Waf.Site.ReptileProtection.index_14")),1),N(q(e.$t("Waf.Site.ReptileProtection.index_15")),1)])])),_:1})])}}}),Se={class:"p-20px"},be={class:"w-40px"},Re={class:"mx-8px"},$e={class:"w-40px"},ke={class:"mx-8px"},je={class:"w-40px"},Ue={class:"ml-8px"},Pe={class:"flex-1"},Ce={class:"flex items-center h-32px"},Ne={class:"w-320px mt-6px"},qe={class:"text-error"},ze=w({__name:"index",props:{row:{},onRefresh:{}},setup(e,{expose:t}){const i=e,l=g(i,"row"),n=b({open:!1,user:50,time:10,qps:1,identity:{type:"default",text:""}});return(()=>{if(!l.value)return;const{limiting:e}=l.value;if(!e)return;const{timeout:t}=e;t&&(n.open=t.open,n.user=t.user,n.time=t.time,n.qps=t.qps,n.identity.type=t.identity.type,n.identity.text=t.identity.text)})(),t({onConfirm:async()=>{await M({site:l.value.siteName,limiting:{open:n.open,user:n.user,time:n.time,qps:n.qps,identity:{type:n.identity.type,text:n.identity.text}}}),i.onRefresh?.()}}),(e,t)=>{const i=te,l=ee,s=oe,o=ae,c=ie,d=le,u=a,p=Y,x=r;return $(),R("div",Se,[k(p,{"label-width":"160px"},{default:j((()=>[k(l,{label:e.$t("Waf.Site.WaitingRoom.index_1")},{default:j((()=>[k(i,{value:C(n).open,"onUpdate:value":t[0]||(t[0]=e=>C(n).open=e)},null,8,["value"])])),_:1},8,["label"]),k(u,{show:C(n).open},{default:j((()=>[k(l,{label:e.$t("Waf.Site.WaitingRoom.index_2")},{default:j((()=>[U("div",be,[k(s,{value:C(n).user,"onUpdate:value":t[1]||(t[1]=e=>C(n).user=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),U("div",Re,q(e.$t("Waf.Site.WaitingRoom.index_3")),1),U("div",$e,[k(s,{value:C(n).time,"onUpdate:value":t[2]||(t[2]=e=>C(n).time=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),U("div",ke,q(e.$t("Waf.Site.WaitingRoom.index_4")),1),U("div",je,[k(s,{value:C(n).qps,"onUpdate:value":t[3]||(t[3]=e=>C(n).qps=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),U("div",Ue,q(e.$t("Waf.Site.WaitingRoom.index_5")),1)])),_:1},8,["label"]),k(l,{label:e.$t("Waf.Site.WaitingRoom.index_6")},{default:j((()=>[U("div",Pe,[U("div",Ce,[k(c,{value:C(n).identity.type,"onUpdate:value":t[4]||(t[4]=e=>C(n).identity.type=e)},{default:j((()=>[k(o,{value:"default"},{default:j((()=>[N(q(e.$t("Waf.Site.WaitingRoom.index_7")),1)])),_:1}),k(o,{value:"text"},{default:j((()=>[N(q(e.$t("Waf.Site.WaitingRoom.index_8")),1)])),_:1})])),_:1},8,["value"])]),P(U("div",Ne,[k(d,{value:C(n).identity.text,"onUpdate:value":t[5]||(t[5]=e=>C(n).identity.text=e),placeholder:e.$t("Waf.Site.WaitingRoom.index_9")},null,8,["value","placeholder"])],512),[[z,"text"===C(n).identity.type]])])])),_:1},8,["label"])])),_:1},8,["show"])])),_:1}),k(x,{class:"mt-16px"},{default:j((()=>[U("li",qe,q(e.$t("Waf.Site.WaitingRoom.index_10")),1),U("li",null,[U("b",null,q(e.$t("Waf.Site.WaitingRoom.index_11")),1),N(q(e.$t("Waf.Site.WaitingRoom.index_12")),1)]),U("li",null,[U("b",null,q(e.$t("Waf.Site.WaitingRoom.index_13")),1),N(q(e.$t("Waf.Site.WaitingRoom.index_14")),1)]),U("li",null,[U("b",null,q(e.$t("Waf.Site.WaitingRoom.index_15")),1),N(q(e.$t("Waf.Site.WaitingRoom.index_16")),1)]),U("li",null,[U("b",null,q(e.$t("Waf.Site.WaitingRoom.index_17")),1),N(q(e.$t("Waf.Site.WaitingRoom.index_18")),1)]),U("li",null,q(e.$t("Waf.Site.WaitingRoom.index_19")),1)])),_:1})])}}}),Oe={class:"mr-8px"},Ve={class:"cursor-pointer"};function Ee(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!F(e)}e("default",w({__name:"index",setup(e){const a=D((()=>n((()=>t.import("./count-legacy.js?v=1752142539265")),void 0))),w=D((()=>n((()=>t.import("./record-legacy.js?v=1752142539265")),void 0))),{t:g}=S(),R=l(),{isNewVersion:P,version:z,lastVersion:F}=V(R),J=()=>{T("btwaf",(()=>{window.location.reload()}))},M=E(!1),Y=async e=>{await Q({obj:"malicious_ip"}),M.value=e},ee=b({p:1,limit:10,search:""}),ie=x(""),ae=x(""),le=async(e,t)=>{await Z({siteName:e.siteName,obj:t})},{table:ne,columns:se,setLoading:oe}=m([{key:"siteName",title:g("Waf.Site.index_8"),minWidth:150,ellipsis:{tooltip:!0},render:e=>k("a",{class:"bt-link",href:"javascript:;",onClick:()=>{H({row:e,onRefresh:_e})}},[e.siteName])},{key:"total",title:g("Waf.Site.index_9"),width:"10%",minWidth:140,render:e=>{let t=0;return e.total.forEach((e=>{t+=e.value})),k(ce,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>k(L,null,[t>0?k("a",{class:"bt-link error",href:"javascript:;",onClick:()=>{(e=>{ie.data.list=e.total,ie.title=g("Waf.Site.index_5",[e.siteName]),ie.show=!0})(e)}},[t]):t]),default:()=>k("div",null,[e.total.map((e=>k("div",{class:"leading-18px"},[e.name,N(": "),e.value,g("Waf.Site.index_35")])))])})}},{key:"not_spider",width:"12%",minWidth:120,title:()=>{let e;return k(L,null,[k("span",{class:"mr-6px"},[g("Waf.Site.index_36")]),k(K,null,Ee(e=g("Waf.Site.index_37"))?e:{default:()=>[e]})])},render:e=>k(de,{checked:e.not_spider,onUpdateChecked:async t=>{await le(e,"not_spider"),e.not_spider=t}},null)},{key:"cdn",width:"12%",minWidth:120,title:()=>{let e;return k(L,null,[k("span",{class:"mr-6px"},[g("Waf.Site.index_38")]),k(K,null,Ee(e=g("Waf.Site.index_39"))?e:{default:()=>[e]})])},render:e=>k(de,{checked:e.cdn,onUpdateChecked:async t=>{await le(e,"cdn"),e.cdn=t}},null)},{key:"smart_cc",width:"14%",minWidth:140,title:()=>k(L,null,[k("span",{class:"mr-6px"},[g("Waf.Site.index_40")]),k(K,null,{default:()=>[k("div",{class:"w-500px"},[g("Waf.Site.index_41")])]})]),render:e=>k("div",{class:"inline-flex items-center"},[k(de,{class:"mr-6px",checked:e.smart_cc.open,onUpdateChecked:async t=>{t?p({title:g("Public.Confirm.Title"),content:g("Waf.Site.index_10"),onConfirm:async()=>{await le(e,"smart_cc"),e.smart_cc.open=t}}):(await le(e,"smart_cc"),e.smart_cc.open=t)}},null),k(ce,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>k("span",{class:"text-desc text-13px"},[e.total[9].value]),default:()=>k(L,null,[g("Waf.Site.index_42",[e.total[9].value])])})])},{key:"crawler",title:g("Waf.Site.index_43"),width:"9%",minWidth:100,render:e=>{const t=(e.crawler?Object.entries(e.crawler):[]).some((([e,t])=>t&&"picturenew"!==e&&"htmlnew"!==e));return k("a",{class:["bt-link",t?"":"error"],href:"javascript:;",onClick:()=>{pe(e)}},[g(t?"Public.Status.Enable":"Public.Status.Disable")])}},{key:"limiting",title:g("Waf.Site.index_44"),width:"10%",minWidth:170,render:e=>k("a",{class:["bt-link",e?.limiting?.timeout?.open?"":"error"],href:"javascript:;",onClick:()=>{xe(e)}},[g(e?.limiting?.timeout?.open?"Public.Status.Enable":"Public.Status.Disable")])},{key:"cc",width:"8%",minWidth:100,title:g("Waf.Site.index_11"),render:e=>k("div",{class:"inline-flex items-center"},[k(de,{class:"mr-6px",checked:e.cc.open,onUpdateChecked:async t=>{await le(e,"cc"),e.cc.open=t}},null),k(ce,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>k("span",{class:"text-desc text-13px"},[e.total[2].value]),default:()=>k(L,null,[g("Waf.Site.index_42",[e.total[2].value])])})])},{key:"open",width:"6%",minWidth:70,title:g("Waf.Site.index_12"),render:e=>k(te,{size:"small",value:e.open,onUpdateValue:async t=>{await le(e,"open"),e.open=t}},null)},_({width:100,options:e=>[{label:g("Waf.Site.index_13"),onClick:()=>{(async e=>{const{message:t}=await X({siteName:e.siteName});s(t)&&t.length>0?(ae.data.timeList=t,ae.data.siteName=e.siteName,ae.title=g("Waf.Site.index_6",[e.siteName]),ae.show=!0):o.success(g("Waf.Site.index_7"))})(e)}},{label:g("Public.Btn.Set"),onClick:()=>{H({row:e,onRefresh:_e})}}]})]),pe=e=>{h({title:g("Waf.Site.index_45",[e.siteName]),width:620,footer:!0,data:{row:e,onRefresh:_e},component:ge})},xe=e=>{h({title:g("Waf.Site.index_46",[e.siteName]),width:700,footer:!0,data:{row:e,onRefresh:_e},component:ze})},me=()=>{ee.p=1,_e()},_e=async()=>{try{oe(!0);const{message:e}=await I(O(ee));i(e)&&(ne.data=e.data,ne.total=c(e.page))}finally{oe(!1)}};return(async()=>{const{message:e}=await G();i(e)&&(M.value=e.malicious_ip)})(),A((()=>{_e()})),(e,t)=>{const i=re,l=W,n=f,s=y,o=v,c=r,p=u,x=ue,m=d;return $(),B(m,{install:C(P)},{desc:j((()=>[U("span",Oe," Current Nginx WAF version is v"+q(C(z))+", latest is v"+q(C(F))+". Please update. ",1),k(i,{class:"px-8px h-24px",type:"primary",size:"small",onClick:J},{default:j((()=>t[6]||(t[6]=[N(" Upgrade ")]))),_:1,__:[6]})])),default:j((()=>[k(x,{class:"p-16px"},{default:j((()=>[k(o,null,{toolsLeft:j((()=>[U("div",Ve,[U("span",{class:"mr-8px text-desc",onClick:t[0]||(t[0]=e=>Y(!C(M)))},q(e.$t("Waf.Site.index_1")),1),k(C(de),{checked:C(M),"onUpdate:checked":Y},null,8,["checked"])])])),toolsRight:j((()=>[k(l,{value:C(ee).search,"onUpdate:value":t[1]||(t[1]=e=>C(ee).search=e),placeholder:e.$t("Waf.Site.index_2"),onSearch:me},null,8,["value","placeholder"])])),table:j((()=>[k(n,{loading:C(ne).loading,data:C(ne).data,columns:C(se)},null,8,["loading","data","columns"])])),pageRight:j((()=>[k(s,{page:C(ee).p,"onUpdate:page":t[2]||(t[2]=e=>C(ee).p=e),"page-size":C(ee).limit,"onUpdate:pageSize":t[3]||(t[3]=e=>C(ee).limit=e),"item-count":C(ne).total,"store-key":"waf-site",onRefresh:_e},null,8,["page","page-size","item-count"])])),_:1}),k(c,{class:"mt-16px"},{default:j((()=>[U("li",null,q(e.$t("Waf.Site.index_3")),1),U("li",null,q(e.$t("Waf.Site.index_4")),1)])),_:1}),k(p,{show:C(ie).show,"onUpdate:show":t[4]||(t[4]=e=>C(ie).show=e),title:C(ie).title,width:480,"min-height":688,data:C(ie).data,component:C(a)},null,8,["show","title","data","component"]),k(p,{show:C(ae).show,"onUpdate:show":t[5]||(t[5]=e=>C(ae).show=e),title:C(ae).title,data:C(ae).data,width:1e3,"min-height":552,component:C(w)},null,8,["show","title","data","component"])])),_:1})])),_:1},8,["install"])}}}))}}}));
