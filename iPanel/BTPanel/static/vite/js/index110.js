import{_ as a}from"./index101.js?v=1752142539265";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1752142539265";import{_ as t,m as s,d as l,e as n}from"./page_layout.js?v=1752142539265";import{n as i,b as o,m as r}from"./planned.js?v=1752142539265";import{c,d}from"./public.js?v=1752142539265";import{aT as u,ay as m,by as p,b$ as _,cz as f,c1 as v,ar as g,bZ as b,cF as x,bX as y}from"./naive.js?v=1752142539265";import{k as C,P as j,e as w,r as P,n as k,G as I,U as S,X as $,Q as h,a2 as N,a1 as J,an as L,j as O,W as U,V as F,a3 as T}from"./vue.js?v=1752142539265";import"./common.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";const W={class:"p-20px h-500px"},X={class:"color-#20a53a"},z=n(C({__name:"index",props:{data:{}},setup(n){const{t:C}=j(),z=w({active:!1,time:3}),A=n,{id:D,getList:E}=A.data,G={time:{trigger:["blur","input"],validator:(a,e)=>e<3?(B(),new Error(C("Crontab.Planned.index_91"))):(R&&(Z.value=e,V.value=100,B()),q(),!0)}},H=()=>{d({title:C("Public.Confirm.Title"),content:C("Crontab.Planned.index_26"),onConfirm:async()=>{await i({id:D}),ea()}})},Q=a=>{a?(R&&B(),q(),s.success(C("Crontab.Planned.index_92"))):(B(),sessionStorage.setItem("timer".concat(D),JSON.stringify({...z,id:D})),s.success(C("Crontab.Planned.index_93")))};let R;const V=P(100),Z=P(z.time),q=()=>{R=setInterval((()=>{V.value-=100/z.time,Z.value-=1,V.value<=0&&(V.value=100,Z.value=z.time,ea())}),1e3),sessionStorage.setItem("timer".concat(D),JSON.stringify({...z,id:D}))},B=()=>{clearInterval(R),R=void 0},K=async()=>{await o({id:D}),null==E||E()},{loading:M,setLoading:Y}=c(),aa=P("None"),ea=async()=>{Y(!0);const{message:a}=await r({id:D});l(a)&&(aa.value=a.result?a.result:"None"),Y(!1)};return ea(),k((()=>{const a=sessionStorage.getItem("timer".concat(D));if(a){const e=JSON.parse(a);z.time=e.time,Z.value=e.time,z.active=e.active,q()}})),I((()=>{B()})),(s,l)=>{const n=p,i=m,o=t,r=v,c=f,d=b,C=x,j=g,w=e,P=_,k=u,I=y,A=a;return $(),S("div",W,[h(I,{class:"mb-10px"},{default:N((()=>[h(k,null,{default:N((()=>[h(i,{class:"refresh-logs-btn",onClick:ea},{default:N((()=>[U(z).active?($(),J(n,{key:0,type:"circle",percentage:U(V),unit:""},{default:N((()=>[F("span",X,T(U(Z)),1)])),_:1},8,["percentage"])):L("",!0),O(" "+T(s.$t("Ftp.Analysis.Index_32")),1)])),_:1}),h(P,{trigger:"click",placement:"bottom",class:"min-w-250px"},{trigger:N((()=>[h(i,null,{default:N((()=>[h(o,{name:"down"})])),_:1})])),default:N((()=>[h(w,{ref:"formRef",model:U(z),rules:G,"label-width":"120px"},{default:N((()=>[h(c,{label:s.$t("Crontab.Planned.index_89")},{default:N((()=>[h(r,{value:U(z).active,"onUpdate:value":[l[0]||(l[0]=a=>U(z).active=a),Q]},null,8,["value"])])),_:1},8,["label"]),U(z).active?($(),J(c,{key:0,label:s.$t("Crontab.Planned.index_90"),path:"time"},{default:N((()=>[h(j,null,{default:N((()=>[h(d,{class:"w-50px!",value:U(z).time,"onUpdate:value":l[1]||(l[1]=a=>U(z).time=a),"show-button":!1,placeholder:""},null,8,["value"]),h(C,null,{default:N((()=>[O(T(s.$t("Waf.Setting.config_53")),1)])),_:1})])),_:1})])),_:1},8,["label"])):L("",!0)])),_:1},8,["model"])])),_:1})])),_:1}),h(i,{class:"empty-logs-btn",onClick:H},{default:N((()=>[O(T(s.$t("Crontab.Planned.index_25")),1)])),_:1}),h(i,{onClick:K},{default:N((()=>[O(T(s.$t("Docker.LocalImage.pull.index_12")),1)])),_:1})])),_:1}),h(A,{loading:U(M),log:U(aa)},null,8,["loading","log"])])}}}),[["__scopeId","data-v-a8de5712"]]);export{z as default};
