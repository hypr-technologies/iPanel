import{_ as e}from"./index.js?v=1752142539265";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1752142539265";import{e as r,b as o,h as t,q as s,c as l,f as i}from"./public.js?v=1752142539265";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1752142539265";import{bV as n,bW as p,d as c,bX as u,bK as m,w as _}from"./page_layout.js?v=1752142539265";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang.js?v=1752142539265";import{k,P as f,t as v,r as w,e as x,U as h,X as g,Q as b,a2 as R,V as D,W as j,N as $,a1 as U,ah as E,j as C,a3 as P}from"./vue.js?v=1752142539265";import{cz as B,aq as K,ay as L,cA as q}from"./naive.js?v=1752142539265";import"./common.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1752142539265";const z={class:"px-20px py-24px"},V={class:"w-430px"},W={class:"w-430px"},X={class:"flex"},A={class:"w-160px"},H={class:"w-160px"},N={class:"w-430px"},Q={class:"w-430px"},S=k({__name:"index",props:{isEdit:{type:Boolean,default:!1},row:{default:void 0}},emits:["refresh"],setup(e,{expose:a,emit:r}){const o=e,t=r,{t:s}=f(),l=v(o,"isEdit"),i=w(),d=x({registry:"",name:"",username:"",password:"",namespace:"",remark:""}),u={registry:{trigger:["blur"],validator:()=>""!==d.registry||new Error(s("Docker.Repository.form.index_11"))},name:{trigger:["blur"],validator:()=>""!==d.name||new Error(s("Docker.Repository.form.index_12"))},username:{trigger:["blur"],validator:()=>""!==d.username||new Error(s("Docker.Repository.form.index_13"))},password:{trigger:["blur"],validator:()=>""!==d.password||new Error(s("Docker.Repository.form.index_13"))},namespace:{trigger:["blur"],validator:()=>""!==d.namespace||new Error(s("Docker.Repository.form.index_14"))}};return(()=>{const{row:e}=o;l.value&&c(e)&&(console.log(1),d.registry=e.url,d.name=e.name,d.username=e.username,d.password=e.password,d.namespace=e.namespace,d.remark=e.remark)})(),a({onConfirm:async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),l.value?o.row&&await p({...$(d),id:o.row.id}):await n($(d)),t("refresh")}}),(e,a)=>{const r=K,o=B,t=y;return g(),h("div",z,[b(t,{ref_key:"formRef",ref:i,model:j(d),rules:u,"label-width":"140px"},{default:R((()=>[b(o,{label:e.$t("Docker.Repository.form.index_1"),path:"registry"},{default:R((()=>[D("div",V,[b(r,{value:j(d).registry,"onUpdate:value":a[0]||(a[0]=e=>j(d).registry=e),placeholder:e.$t("Docker.Repository.form.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),b(o,{label:e.$t("Docker.Repository.form.index_3"),path:"name"},{default:R((()=>[D("div",W,[b(r,{value:j(d).name,"onUpdate:value":a[1]||(a[1]=e=>j(d).name=e),placeholder:e.$t("Docker.Repository.form.index_4")},null,8,["value","placeholder"])])])),_:1},8,["label"]),D("div",X,[b(o,{label:e.$t("Docker.Repository.form.index_5"),path:"username"},{default:R((()=>[D("div",A,[b(r,{value:j(d).username,"onUpdate:value":a[2]||(a[2]=e=>j(d).username=e),placeholder:e.$t("Docker.Repository.form.index_6")},null,8,["value","placeholder"])])])),_:1},8,["label"]),b(o,{label:e.$t("Docker.Repository.form.index_15"),"label-width":"110",path:"password"},{default:R((()=>[D("div",H,[b(r,{value:j(d).password,"onUpdate:value":a[3]||(a[3]=e=>j(d).password=e),placeholder:e.$t("Docker.Repository.form.index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"])]),b(o,{label:e.$t("Docker.Repository.form.index_8"),path:"namespace"},{default:R((()=>[D("div",N,[b(r,{value:j(d).namespace,"onUpdate:value":a[4]||(a[4]=e=>j(d).namespace=e),placeholder:e.$t("Docker.Repository.form.index_9")},null,8,["value","placeholder"])])])),_:1},8,["label"]),b(o,{label:e.$t("Docker.Repository.form.index_10"),path:"remark","show-feedback":!1},{default:R((()=>[D("div",Q,[b(r,{value:j(d).remark,"onUpdate:value":a[5]||(a[5]=e=>j(d).remark=e),placeholder:e.$t("Docker.Repository.form.index_10")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),F=k({__name:"index",setup(n){const{t:p}=f(),c=r(p("Docker.Repository.index_1"),{isEdit:!1,onRefresh:()=>{z()}}),y=()=>{c.data.row=void 0,c.data.isEdit=!1,c.title=p("Docker.Repository.index_1"),c.show=!0},k=x({page:1,pageSize:10}),{keys:v,table:w,columns:h}=o([{type:"selection",width:40},{key:"url",title:"URL",ellipsis:{tooltip:{width:"trigger"}},render:e=>e.url||"--"},{key:"namespace",title:p("Docker.Repository.index_3"),ellipsis:{tooltip:{width:"trigger"}},render:e=>e.namespace||"--"},{key:"name",title:p("Docker.Repository.index_4"),ellipsis:{tooltip:{width:"trigger"}},render:e=>e.name||"--"},{key:"remark",title:p("Docker.Repository.index_5"),render:e=>e.remark||"--"},t({width:120,options:e=>[{label:p("Public.Btn.Edit"),disabled:1===e.id,onClick:()=>{(e=>{c.data.row=e,c.data.isEdit=!0,c.title=p("Docker.Repository.index_2",[e.name]),c.show=!0})(e)}},{label:p("Public.Btn.Del"),disabled:1===e.id,onClick:()=>{D(e)}}]})]),D=e=>{s({title:p("Docker.Repository.index_8",[e.name]),content:p("Docker.Repository.index_9",[e.name]),onConfirm:async()=>{await u({id:e.id}),z()}})},$=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:p("Docker.Repository.index_10"),desc:p("Docker.Repository.index_11"),columns:[h.value[3]],api:e=>u({id:e.id},!1),done:()=>{z()}}}],{loading:B,setLoading:K}=l(),z=async()=>{try{K(!0);const{message:e}=await m();w.data=_(e)?e:[]}finally{v.value=[],K(!1)}};return z(),(r,o)=>{const t=L,s=d,l=i,n=a,p=e,u=q;return g(),U(u,{class:"p-16px"},{default:R((()=>[b(n,null,{toolsLeft:R((()=>[b(t,{type:"primary",onClick:y},{default:R((()=>[C(P(r.$t("Docker.Repository.index_1")),1)])),_:1})])),table:R((()=>[b(l,{page:j(k),"onUpdate:page":o[1]||(o[1]=e=>E(k)?k.value=e:null),"checked-row-keys":j(v),"onUpdate:checkedRowKeys":o[2]||(o[2]=e=>E(v)?v.value=e:null),"is-page":!0,loading:j(B),data:j(w).data,columns:j(h)},{pagePrefix:R((()=>[b(s,{"checked-row-keys":j(v),"onUpdate:checkedRowKeys":o[0]||(o[0]=e=>E(v)?v.value=e:null),data:j(w).data,options:$},null,8,["checked-row-keys","data"])])),_:1},8,["page","checked-row-keys","loading","data","columns"])])),_:1}),b(p,{show:j(c).show,"onUpdate:show":o[3]||(o[3]=e=>j(c).show=e),data:j(c).data,title:j(c).title,width:620,footer:!0,component:S},null,8,["show","data","title"])])),_:1})}}});export{F as default};
