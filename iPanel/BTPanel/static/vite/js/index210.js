import{_ as e,d as a}from"./public.js?v=1752142539265";import{_ as i}from"./index.vue_vue_type_script_setup_true_lang.js?v=1752142539265";import{k as l,P as t,ac as n,r as c,U as s,X as o,F as d,V as _,Q as u,W as p,a2 as r,a3 as f,l as x,v as m,j as v,t as b,c as g,e as S,a4 as C}from"./vue.js?v=1752142539265";import{d as W,m as y,w}from"./page_layout.js?v=1752142539265";import{d as $}from"./setting.js?v=1752142539265";import{i as h,j as U,k as j,l as k}from"./site3.js?v=1752142539265";import{_ as P}from"./index190.js?v=1752142539265";import{cD as E,bZ as D,_ as M,cz as T,aT as N,ay as B}from"./naive.js?v=1752142539265";import"./common.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";const J={class:"w-160px"},O={class:"ml-8px"},R={class:"w-300px text-#666 leading-18px"},q={class:"mb-4px"},z={class:"mb-10px"},A={class:"mb-4px"},F={class:"mb-10px"},H={class:"mb-4px"},I={class:"mb-10px"},Q={class:"mb-4px"},V=l({__name:"RequestType",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const{t:a}=t(),i=n(e,"value"),l=c([{label:a("Waf.Site.Config.index_40"),value:1},{label:a("Waf.Site.Config.index_41"),value:2},{label:a("Waf.Site.Config.index_42"),value:3},{label:a("Waf.Site.Config.index_43"),value:4}]);return(e,a)=>{const t=E,n=P;return o(),s(d,null,[_("div",J,[u(t,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),options:p(l)},null,8,["value","options"])]),_("div",O,[u(n,null,{default:r((()=>[_("div",R,[_("div",q,[_("b",null,f(e.$t("Waf.Site.Config.desc_1")),1)]),_("div",z,f(e.$t("Waf.Site.Config.desc_2")),1),_("div",A,[_("b",null,f(e.$t("Waf.Site.Config.desc_3")),1)]),_("div",F,f(e.$t("Waf.Site.Config.desc_4")),1),_("div",H,[_("b",null,f(e.$t("Waf.Site.Config.desc_5")),1)]),_("div",I,f(e.$t("Waf.Site.Config.desc_6")),1),_("div",Q,[_("b",null,f(e.$t("Waf.Site.Config.desc_7")),1)]),_("div",null,f(e.$t("Waf.Site.Config.desc_8")),1)])])),_:1})])],64)}}}),X={class:"w-100px"},Z={class:"ml-8px"},G={class:"w-300px text-#666 leading-18px"},K={class:"mb-4px"},L={class:"mb-10px"},Y={class:"mb-4px"},ee=l({__name:"UrlDefense",props:{url:{},urlModifiers:{}},emits:["update:url"],setup(e){const{t:a}=t(),i=n(e,"url"),l=c([{label:a("Public.Status.Enable"),value:1},{label:a("Public.Status.Disable"),value:0}]);return(e,a)=>{const t=E,n=P;return o(),s(d,null,[_("div",X,[u(t,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),options:p(l)},null,8,["value","options"])]),_("div",Z,[u(n,null,{default:r((()=>[_("div",G,[_("div",K,[_("b",null,f(e.$t("Waf.Site.Config.index_104")),1)]),_("div",L,f(e.$t("Waf.Site.Config.index_107")),1),_("div",Y,[_("b",null,f(e.$t("Waf.Site.Config.index_105")),1)]),_("div",null,f(e.$t("Waf.Site.Config.index_106")),1)])])),_:1})])],64)}}}),ae={class:"flex-1"},ie={class:"flex items-center"},le={class:"w-100px"},te={class:"ml-8px"},ne={class:"w-300px text-#666 leading-18px"},ce={class:"mb-4px"},se={class:"mb-10px"},oe={class:"mb-4px"},de={class:"w-80px ml-12px"},_e={class:"ml-12px"},ue=l({__name:"IpDefense",props:{open:{},openModifiers:{},max:{},maxModifiers:{},contain:{type:Boolean},containModifiers:{}},emits:["update:open","update:max","update:contain"],setup(e){const{t:a}=t(),i=n(e,"open"),l=c([{label:a("Public.Status.Enable"),value:1},{label:a("Public.Status.Disable"),value:0}]),d=n(e,"max"),b=n(e,"contain");return(e,a)=>{const t=E,n=P,c=D,g=M;return o(),s("div",ae,[_("div",ie,[_("div",le,[u(t,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),options:p(l)},null,8,["value","options"])]),_("div",te,[u(n,null,{default:r((()=>[_("div",ne,[_("div",ce,[_("b",null,f(e.$t("Waf.Site.Config.index_104")),1)]),_("div",se,f(e.$t("Waf.Site.Config.index_108")),1),_("div",oe,[_("b",null,f(e.$t("Waf.Site.Config.index_105")),1)]),_("div",null,f(e.$t("Waf.Site.Config.index_106")),1)])])),_:1})]),x(_("div",de,[u(c,{value:d.value,"onUpdate:value":a[1]||(a[1]=e=>d.value=e),placeholder:"","show-button":!1},null,8,["value"])],512),[[m,1===i.value]]),x(_("div",{class:"ml-8px text-desc"},f(e.$t("Public.Unit.Time",d.value||0)),513),[[m,1===i.value]]),x(_("div",_e,[u(g,{checked:b.value,"onUpdate:checked":a[2]||(a[2]=e=>b.value=e)},{default:r((()=>[v(f(e.$t("Waf.Site.Config.index_110")),1)])),_:1},8,["checked"])],512),[[m,1===i.value]])]),x(_("div",{class:"mt-12px text-error"},f(e.$t("Waf.Site.Config.index_111")),513),[[m,!d.value||d.value<5e3]])])}}}),pe={class:"p-20px"},re={class:"flex-1"},fe={class:"w-160px"},xe={class:"w-160px mr-8px"},me={class:"text-desc"},ve={class:"w-160px mr-8px"},be={class:"text-desc"},ge={class:"w-160px mr-8px"},Se={class:"text-desc"},Ce={class:"w-320px"},We={class:"flex-1"},ye={class:"w-160px"},we={class:"text-error"},$e={class:"text-error"},he={class:"text-error"},Ue={class:"text-error"},je={class:"text-error"},ke={class:"text-error"},Pe={class:"text-error"},Ee=l({__name:"index",props:{siteName:{},config:{}},emits:["refresh"],setup(l,{expose:n,emit:P}){const M=l,J=P,{t:O}=t(),R=b(M,"siteName"),q=c(null),z=g((()=>void 0===R.value)),A=S({cc_mode:1,cc_type_status:2,cycle:60,limit:120,endtime:1800,is_cc_url:1,cc_enhance_mode:1,increase_wu_heng:1,country:[],cc_increase_type:"js",cc_ip_max:{open:0,ip_max:1e4,static:!1}}),F={cycle:{trigger:["blur","input"],validator:()=>A.cycle?!(A.cycle<30)||new Error(O("Waf.Site.Config.index_35")):new Error(O("Waf.Site.Config.index_34"))},limit:{trigger:["blur","input"],validator:()=>A.limit?!(A.limit<30)||new Error(O("Waf.Site.Config.index_35")):new Error(O("Waf.Site.Config.index_36"))},endtime:{trigger:["blur","input"],validator:()=>!!A.endtime||new Error(O("Waf.Site.Config.index_37"))}},H=[{label:O("Waf.Site.Config.index_38"),value:1},{label:O("Waf.Site.Config.index_39"),value:2}],I=c([{label:O("Waf.Site.Config.index_46"),value:"browser"},{label:O("Waf.Site.Config.index_47"),value:"js"},{label:O("Waf.Site.Config.index_48"),value:"code"},{label:O("Waf.Site.Config.index_49"),value:"renji"},{label:O("Waf.Site.Config.index_50"),value:"huadong"}]),Q=c([]),X=()=>{A.country=Q.value.map((e=>"".concat(e.value)))},Z=()=>{A.country=[]};let G=!1;const K=async e=>{if("renji"===e&&!G){const{message:e}=await h();G=!0,W(e)&&e.result&&(A.cc_increase_type="js",I.value[3].disabled=!0,I.value[4].disabled=!0,y.error(O("Waf.Site.Config.index_51")))}},L=async()=>{const{close:e}=y.loading(O("Waf.Site.Config.index_52",[z.value?O("Waf.Site.Config.index_99"):O("Waf.Site.Config.index_100")]));try{const e=(()=>{const e=1===A.cc_mode?{country:A.country.join(","),is_cc_url:A.is_cc_url}:{};return{cc_mode:1===A.cc_mode?1:A.cc_enhance_mode?3:4,cycle:A.cycle,limit:A.limit,endtime:A.endtime,is_open_global:void 0===R.value?1:0,increase:0===A.cc_enhance_mode?0:1,increase_wu_heng:A.increase_wu_heng,cc_increase_type:A.cc_increase_type,cc_type_status:A.cc_type_status,...e,cc_ip_max:JSON.stringify({open:1===A.cc_ip_max.open,ip_max:A.cc_ip_max.ip_max,static:A.cc_ip_max.static})}})();3!==e.cc_mode&&await j(),z.value?await $(e):await k({...e,siteName:R.value||""}),J("refresh")}finally{e()}};return(async()=>{const{message:e}=await U();w(e)&&(Q.value=e.map((e=>({label:e,value:e}))))})(),(()=>{const{config:e}=M;e&&(A.cc_mode=e.cc_mode<=1?1:2,A.cc_type_status=e.cc_type_status,A.cycle=e.cc.cycle,A.limit=e.cc.limit,A.endtime=e.cc.endtime,A.is_cc_url=e.cc.is_cc_url?1:0,A.cc_increase_type=e.cc.cc_increase_type||"js",A.country=Object.keys(e.cc.countrys),e.cc.cc_ip_max&&(A.cc_ip_max.open=e.cc.cc_ip_max.open?1:0,A.cc_ip_max.ip_max=e.cc.cc_ip_max.ip_max,A.cc_ip_max.static=e.cc.cc_ip_max.static))})(),n({onConfirm:async({hide:e})=>{var i;if(await(null==(i=q.value)?void 0:i.validate()),2===A.cc_mode)return a({title:O("Public.Confirm.Title"),content:()=>u(d,null,[O("Waf.Site.Config.desc_9"),u("br",null,null),O("Waf.Site.Config.desc_10"),u("br",null,null),O("Waf.Site.Config.desc_11")]),onConfirm:async({hide:a})=>(await L(),a(),e(),!1)}),!1;await L()}}),(a,l)=>{const t=E,n=T,c=D,d=B,b=N,g=i,S=C("i18n-t"),W=e;return o(),s("div",pe,[u(g,{ref_key:"formRef",ref:q,model:p(A),rules:F,"label-width":"160"},{default:r((()=>[u(n,{label:a.$t("Waf.Site.Config.index_11")},{default:r((()=>[_("div",re,[_("div",fe,[u(t,{value:p(A).cc_mode,"onUpdate:value":l[0]||(l[0]=e=>p(A).cc_mode=e),options:H},null,8,["value"])]),x(_("div",{class:"w-320px mt-6px text-desc leading-20px"},f(a.$t("Waf.Site.Config.index_12")),513),[[m,2===p(A).cc_mode]])])])),_:1},8,["label"]),u(n,{label:a.$t("Waf.Site.Config.index_13")},{default:r((()=>[u(V,{value:p(A).cc_type_status,"onUpdate:value":l[1]||(l[1]=e=>p(A).cc_type_status=e)},null,8,["value"])])),_:1},8,["label"]),u(n,{label:a.$t("Waf.Site.Config.index_14"),path:"cycle"},{default:r((()=>[_("div",xe,[u(c,{value:p(A).cycle,"onUpdate:value":l[2]||(l[2]=e=>p(A).cycle=e),min:30,"show-button":!1},null,8,["value"])]),_("span",me,f(a.$t("Public.Unit.Second",p(A).cycle)),1)])),_:1},8,["label"]),u(n,{label:a.$t("Waf.Site.Config.index_16"),path:"limit"},{default:r((()=>[_("div",ve,[u(c,{value:p(A).limit,"onUpdate:value":l[3]||(l[3]=e=>p(A).limit=e),min:30,"show-button":!1},null,8,["value"])]),_("span",be,f(a.$t("Public.Unit.Time",p(A).limit)),1)])),_:1},8,["label"]),u(n,{label:a.$t("Waf.Site.Config.index_18"),path:"endtime"},{default:r((()=>[_("div",ge,[u(c,{value:p(A).endtime,"onUpdate:value":l[4]||(l[4]=e=>p(A).endtime=e),min:1,"show-button":!1},null,8,["value"])]),_("span",Se,f(a.$t("Public.Unit.Second",p(A).endtime)),1)])),_:1},8,["label"]),x(u(n,{label:a.$t("Waf.Site.Config.index_19")},{default:r((()=>[u(ee,{url:p(A).is_cc_url,"onUpdate:url":l[5]||(l[5]=e=>p(A).is_cc_url=e)},null,8,["url"])])),_:1},8,["label"]),[[m,1===p(A).cc_mode]]),u(n,{label:a.$t("Waf.Site.Config.index_109")},{default:r((()=>[u(ue,{open:p(A).cc_ip_max.open,"onUpdate:open":l[6]||(l[6]=e=>p(A).cc_ip_max.open=e),max:p(A).cc_ip_max.ip_max,"onUpdate:max":l[7]||(l[7]=e=>p(A).cc_ip_max.ip_max=e),contain:p(A).cc_ip_max.static,"onUpdate:contain":l[8]||(l[8]=e=>p(A).cc_ip_max.static=e)},null,8,["open","max","contain"])])),_:1},8,["label"]),x(u(n,{label:a.$t("Waf.Site.Config.index_20"),"show-feedback":!1},{default:r((()=>[_("div",Ce,[u(t,{value:p(A).country,"onUpdate:value":l[9]||(l[9]=e=>p(A).country=e),options:p(Q),multiple:!0,filterable:!0,"max-tag-count":"responsive",":placeholder":a.$t("Waf.Site.Config.index_21")},{header:r((()=>[u(b,{class:"w-full"},{default:r((()=>[u(d,{class:"flex-1",onClick:X},{default:r((()=>[v(f(a.$t("Public.All")),1)])),_:1}),u(d,{class:"flex-1",onClick:Z},{default:r((()=>[v(f(a.$t("Public.Btn.Cancel")),1)])),_:1})])),_:1})])),_:1},8,["value","options",":placeholder"])])])),_:1},8,["label"]),[[m,1===p(A).cc_mode]]),x(u(n,{label:a.$t("Waf.Site.Config.index_22"),"show-feedback":!1},{default:r((()=>[_("div",We,[_("div",ye,[u(t,{value:p(A).cc_increase_type,"onUpdate:value":[l[10]||(l[10]=e=>p(A).cc_increase_type=e),K],options:p(I)},null,8,["value","options"])]),x(_("div",{class:"mt-6px text-error"},f(a.$t("Waf.Site.Config.index_23")),513),[[m,"code"===p(A).cc_increase_type]])])])),_:1},8,["label"]),[[m,2===p(A).cc_mode]])])),_:1},8,["model"]),u(W,{class:"mt-20px"},{default:r((()=>[_("li",we,f(a.$t("Waf.Site.Config.index_24")),1),x(_("li",{class:"text-error"},f(a.$t("Waf.Site.Config.index_102")),513),[[m,2===p(A).cc_mode]]),u(S,{tag:"li",keypath:"Waf.Site.Config.index_97",scope:"global"},{index_1:r((()=>[_("span",$e,f(p(A).limit),1)])),index_2:r((()=>[_("span",he,f(p(A).cycle),1)])),index_3:r((()=>[_("span",Ue,f(p(A).endtime),1)])),_:1}),x(_("li",{class:"text-error"},f(a.$t("Waf.Site.Config.index_29")),513),[[m,1===p(A).cc_mode]]),u(S,{tag:"li",keypath:"Waf.Site.Config.index_98",scope:"global"},{index_1:r((()=>l[11]||(l[11]=[_("span",{class:"text-error"},"JS",-1)]))),index_2:r((()=>[_("span",je,f(p(A).cycle),1)])),index_3:r((()=>[_("span",ke,f(a.config.retry),1)])),index_4:r((()=>[_("span",Pe,f(p(A).endtime),1)])),_:1})])),_:1})])}}});export{Ee as default};
