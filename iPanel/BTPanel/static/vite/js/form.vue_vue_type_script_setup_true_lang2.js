import{_ as e}from"./public.js?v=1752142539265";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1752142539265";import{d as a}from"./page_layout.js?v=1752142539265";import{aG as l,X as s}from"./site.js?v=1752142539265";import{cz as i,aq as u,_ as r,ay as n}from"./naive.js?v=1752142539265";import{k as d,P as o,t as _,r as p,e as f,U as m,X as c,Q as x,W as v,a2 as h,V as b,j as g,a3 as k}from"./vue.js?v=1752142539265";const S={class:"w-300px"},w={class:"w-300px"},$={class:"w-300px"},j={class:"flex flex-col"},y=d({__name:"form",props:{site:{}},emits:["changeHotlink"],setup(d,{expose:y,emit:C}){const{t:U}=o(),R=C,E=_(d,"site"),L=p(null),z=f({fix:"",domains:"",return_rule:"",status:!1,http_status:!1}),H={fix:{trigger:["blur","change"],validator:()=>""!==z.fix.trim()||new Error(U("Site.RulesError.index_330"))},return_rule:{trigger:["blur","change"],validator:()=>""!==z.return_rule.trim()||new Error(U("Site.RulesError.index_330"))}},X=()=>{G()},q=()=>{G()},G=async()=>{var e;await(null==(e=L.value)?void 0:e.validate()),await l({id:E.value.id,name:E.value.name,fix:z.fix,domains:z.domains.trim().split("\n").join(","),return_rule:z.return_rule,status:z.status,http_status:z.http_status}),R("changeHotlink",z.status),P()},P=async()=>{const{message:e}=await s({id:E.value.id,name:E.value.name});a(e)&&(z.fix=e.fix,z.domains=e.domains.split(",").join("\n"),z.return_rule=e.return_rule,z.status=e.status,z.http_status="true"===e.http_status||!0===e.http_status)};return P(),y({init:P}),(a,l)=>{const s=u,d=i,o=r,_=n,p=t,f=e;return c(),m("div",null,[x(p,{ref_key:"formRef",ref:L,class:"px-8px",model:v(z),rules:H},{default:h((()=>[x(d,{label:a.$t("Site.Lable.index_6"),path:"fix"},{default:h((()=>[b("div",S,[x(s,{value:v(z).fix,"onUpdate:value":l[0]||(l[0]=e=>v(z).fix=e),disabled:v(z).status,placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),x(d,{label:a.$t("Site.Lable.index_7")},{default:h((()=>[b("div",w,[x(s,{value:v(z).domains,"onUpdate:value":l[1]||(l[1]=e=>v(z).domains=e),type:"textarea",autosize:{minRows:6,maxRows:6},placeholder:""},null,8,["value"])])])),_:1},8,["label"]),x(d,{label:a.$t("Site.Lable.index_13"),path:"return_rule"},{default:h((()=>[b("div",$,[x(s,{value:v(z).return_rule,"onUpdate:value":l[2]||(l[2]=e=>v(z).return_rule=e),disabled:v(z).status,placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),x(d,{label:" "},{default:h((()=>[b("div",j,[x(o,{checked:v(z).status,"onUpdate:checked":[l[3]||(l[3]=e=>v(z).status=e),X]},{default:h((()=>[g(k(a.$t("Site.Config.index_94")),1)])),_:1},8,["checked"]),x(o,{checked:v(z).http_status,"onUpdate:checked":[l[4]||(l[4]=e=>v(z).http_status=e),q],class:"mt-16px"},{default:h((()=>[g(k(a.$t("Site.Config.index_95")),1)])),_:1},8,["checked"])])])),_:1}),x(d,{label:" ","show-feedback":!1},{default:h((()=>[x(_,{type:"primary",onClick:G},{default:h((()=>[g(k(a.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"]),x(f,{class:"mt-20px"},{default:h((()=>[b("li",null,[g(k(a.$t("Site.Config.index_96")),1),l[5]||(l[5]=b("br",null,null,-1)),g(" "+k(a.$t("Site.Config.index_97")),1)]),b("li",null,k(a.$t("Site.Config.index_98")),1),b("li",null,k(a.$t("Site.Config.index_99")),1)])),_:1})])}}});export{y as _};
