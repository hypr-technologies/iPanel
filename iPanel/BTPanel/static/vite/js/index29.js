const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index141.js?v=1752142539265","js/index172.js?v=1752142539265","js/__commonjsHelpers__.js?v=1752142539265","js/page_layout.js?v=1752142539265","js/vue.js?v=1752142539265","js/naive.js?v=1752142539265","js/common.js?v=1752142539265","js/public.js?v=1752142539265","css/public.css?v=1752142539265","css/page_layout.css?v=1752142539265","css/index23.css?v=1752142539265","js/index102.js?v=1752142539265","css/index19.css?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang.js?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang6.js?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang2.js?v=1752142539265","js/index96.js?v=1752142539265","css/index13.css?v=1752142539265","js/index100.js?v=1752142539265","css/index17.css?v=1752142539265","js/index142.js?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang4.js?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang7.js?v=1752142539265","css/index16.css?v=1752142539265","css/index72.css?v=1752142539265"])))=>i.map(i=>d[i]);
var e,a=Object.freeze,l=Object.defineProperty;import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1752142539265";import{_ as s}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1752142539265";import{k as n,P as p,$ as o,af as i,r,c,Q as u,t as d,F as v,u as m,e as f,U as _,X as x,a2 as g,V as b,W as h,ah as y,N as k,a1 as w,O as A,j as D,a3 as C,l as j,v as O,aj as P,_ as S,w as z,I as E}from"./vue.js?v=1752142539265";import{v as I,i as q,u as R,_ as U,w as M,y as T,bg as B,d as F,bh as L,f as N,m as $,bi as H,V,W,k as J,bj as K,p as Q,q as X,a as Z,e as G}from"./page_layout.js?v=1752142539265";import{u as Y,d as ee,y as ae,c as le}from"./public.js?v=1752142539265";import{c0 as te,cK as se,cz as ne,aq as pe,bZ as oe,_ as ie,cD as re,B as ce,bA as ue,ay as de,cH as ve,b$ as me,cA as fe}from"./naive.js?v=1752142539265";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1752142539265";import{_ as xe}from"./index100.js?v=1752142539265";const ge=(e,a=!1)=>I.post("/mod/docker/com/get_apps",e,{requestOptions:{loading:a?q.global.t("Docker.api.App.index_1"):""}}),be=e=>I.post("/mod/docker/com/get_app_log",e),he=e=>I.post("/mod/docker/com/get_app_installed_log",e),ye=e=>I.post("/mod/docker/com/get_backup_list",e),ke=e=>I.post("/mod/docker/com/backup_app",e,{requestOptions:{loading:q.global.t("Docker.api.App.index_5"),successMessage:!0}}),we=e=>I.post("/mod/docker/com/delete_backup",e,{requestOptions:{loading:q.global.t("Docker.api.App.index_4"),successMessage:!0}}),Ae=e=>I.post("/mod/docker/com/restore_backup",e,{requestOptions:{loading:q.global.t("Docker.api.App.index_6"),successMessage:!0}}),De=e=>I.post("/mod/docker/com/upload_backup",e,{headers:{"Content-Type":"multipart/form-data"},requestOptions:{loading:q.global.t("Docker.api.App.index_7"),successMessage:!0}}),Ce=n({name:"DockerAppCategory",props:{value:{type:String}},setup(e,{emit:a}){const{t:l}=p(),t=R(),{mainWidth:s}=o(t),n=i(e,"value",a),d=r([]),v=c((()=>Math.floor((s.value-480)/100))),m=c((()=>d.value.slice(0,v.value))),f=c((()=>d.value.slice(v.value,d.value.length).map((e=>({label:e.label,key:e.value}))))),_=c((()=>f.value.filter((e=>e.key===n.value)).length>0)),x=c((()=>{const e=f.value.filter((e=>e.key===n.value));return e.length>0?"（".concat(e[0].label,"）"):""})),g=e=>{n.value=e},b=()=>{d.value.unshift({label:l("Docker.App.app_category_0"),value:"installed"}),d.value.unshift({label:l("Public.All"),value:"all"})};return b(),(async()=>{const{message:e}=await((e={})=>I.post("/mod/docker/com/get_tags",e))();M(e)&&(se(e,["sort"],["asc"]),d.value=e.map((e=>({label:e.desc,value:e.type}))),b())})(),()=>u("div",{class:"flex gap-10px"},[m.value.map((e=>u(Oe,{label:e.label,active:e.value===n.value,onClick:()=>{n.value=e.value}},null))),f.value.length>0?u(te,{trigger:"hover",options:f.value,onSelect:g},{default:()=>[u(Oe,{active:_.value},{default:()=>[u("span",{class:"mr-8px"},[l("Docker.App.app_category_1"),x.value]),u(U,{name:"base-arrow-bottom"},null)]})]}):""])}}),je=T({display:"flex",alignItems:"center",justifyContent:"center",minWidth:"80px",height:"32px",padding:"0 10px",borderRadius:"2px",cursor:"pointer",backgroundColor:"#E6E6E6",transition:"all .3s",color:"#555","&.active":{backgroundColor:"#E8F6EB",color:"#20A53A"}}),Oe=n({name:"DockerAppCategoryItem",props:{label:{type:String,default:""},active:{type:Boolean,default:!1},onClick:{type:Function}},setup:(e,{emit:a,slots:l})=>()=>u("div",{class:[je,e.active?"active":""],onClick:()=>{a("click")}},[l.default?l.default():e.label])});function Pe(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!m(e)}const Se=n({name:"ConfigForm",props:{data:{type:Object,default:()=>({})},config:{type:Array,default:()=>[]}},setup(e){const a=d(e,"config"),l=i(e,"data");return a.value.forEach((e=>{l.value[e.attr]=e.default})),()=>u(v,null,[a.value.map(((e,t)=>{let s;return u(ne,{key:e.attr,label:(n=e.name,n?n.charAt(0).toUpperCase()+n.slice(1):n),showFeedback:t!==a.value.length-1},Pe(s=function(e,a){const{t:l}=p(),t=B(),{attr:s,name:n,type:o}=e,{maxCpu:i,maxMemory:r}=t;let c=e.suffix;"cpus"===s&&(c="".concat(c," ").concat(i));"memory_limit"===s&&(c="".concat(c," ").concat(r," MB"));const d=l("Docker.App.Install.index_7",[n]);switch(o){case"checkbox":return u(v,null,[u(ie,{checked:a.value[s],"onUpdate:checked":e=>a.value[s]=e,class:"items-center"},Pe(c)?c:{default:()=>[c]})]);case"textarea":return u(v,null,[u("div",{class:"w-240px min-w-240px"},[u(xe,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,rows:1,placeholder:d},null)]),u("span",{class:"ml-10px"},[c])]);case"number":return u(v,null,[u("div",{class:"w-240px min-w-240px"},[u(oe,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,showButton:!1,placeholder:d},null)]),u("span",{class:"ml-10px"},[c])]);case"password":return u(v,null,[u("div",{class:"w-240px min-w-240px"},[u(_e,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,default:!0,placeholder:d},null)]),u("span",{class:"ml-10px"},[c])]);case"url":case"text":return u(v,null,[u("div",{class:"w-240px min-w-240px"},[u(pe,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,placeholder:d},null)]),u("span",{class:"ml-10px"},[c])])}return u(v,null,null)}(e,l))?s:{default:()=>[s]});var n}))])}});const ze=n({name:"DependForm",props:{data:{type:Object,default:()=>({})},config:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:a}){const{t:l}=p(),t=B(),s=d(e,"config"),n=i(e,"data"),o=r([]),c=r({});return(async()=>{const e=[];if(c.value={},o.value=[],s.value.forEach((a=>{const l=a.appname?a.appname[0]:null;n.value[a.apptype]={name:l,service_name:null},a.appname.forEach((l=>{c.value[l]={appName:l,appType:a.apptype,version:"",options:[]},o.value.push({label:l,value:l}),e.push({app_name:l,app_type:a.apptype})}))})),0===e.length)return;const{message:a}=await(l={depend_app:e},I.post("/mod/docker/com/get_dependence_apps",{depend_app:JSON.stringify(l.depend_app)}));var l;F(a)&&M(a.data)&&a.data.forEach((e=>{const a=c.value[e.appname];a&&(a.options=e.installed.map((e=>({label:"".concat(e.service_name," ").concat(e.version),value:e.service_name}))),n.value[e.app_type]&&n.value[e.app_type].name===e.appname&&e.installed.length>0&&(n.value[e.app_type].service_name=e.installed[0].service_name))}))})(),()=>u(v,null,[s.value.map(((e,p)=>{const i=n.value[e.apptype].name,r=c.value[i||""]||{appName:"",options:[]};return u(ne,{key:e.apptype,label:e.appTypeCN,class:0===p?"mt-20px":"",showFeedback:p!==s.value.length-1},{default:()=>[u("div",{class:"flex-1"},[u("div",{class:"flex items-center"},[r.appName?u("div",{class:"w-120px min-w-120px"},[u(re,{value:n.value[e.apptype].name,"onUpdate:value":[a=>n.value[e.apptype].name=a,()=>{const a=n.value[e.apptype].name,l=c.value[a||""]||{options:[]};l.options.length>0?n.value[e.apptype].service_name="".concat(l.options[0].value):n.value[e.apptype].service_name=null}],options:o.value},null)]):"",u("div",{class:"w-160px min-w-160px ml-8px"},[u(re,{value:n.value[e.apptype].service_name,"onUpdate:value":a=>n.value[e.apptype].service_name=a,options:r.options,disabled:0===r.options.length,placeholder:r.options.length>0?void 0:l("Docker.App.Install.index_8")},null)]),u("span",{class:"ml-8px"},[e.appDesc])]),0===r.options.length?u("div",{class:"mt-8px"},[u("a",{class:"bt-link",href:"javascript:;",onClick:()=>{(async e=>{const l=e.apptype,s=n.value[l].name,{message:p}=await ge({p:1,row:300,query:"",app_type:"all",force:0},!0);if(F(p)&&M(p.data)){const e=p.data.find((e=>e.appname===s));e&&(a("close"),t.setType(e.apptype),t.setRefresh(!0),Ue(e))}})(e)}},[l("Public.Btn.Install")])]):""])]})}))])}}),Ee={class:"p-20px py-24px"},Ie={class:"w-240px"},qe={class:"w-160px"},Re=n({__name:"index",props:{app:{}},emits:["close"],setup(e,{expose:a,emit:l}){const s=l,n=d(e,"app"),{t:o}=p(),i=B(),c=f({service_name:"".concat(n.value.appname,"_").concat(L(4)),version:null}),v=r({}),m=r({}),w=r([]),A=()=>{s("close")};return w.value=[],n.value.appversion.forEach((e=>{e.s_version.length?e.s_version.forEach((a=>{w.value.push({label:"".concat(e.m_version,".").concat(a),value:"".concat(e.m_version,".").concat(a)})})):w.value.push({label:e.m_version,value:e.m_version})})),w.value.length>0&&(c.version=w.value[0].value?"".concat(w.value[0].value):null),a({onConfirm:async()=>{const e=(()=>{const{domain:e}=v.value;if(N(e)&&e){const a=e.split("\n"),l=a.findIndex((e=>e.split(":")[0].length<3||e.split(":")[0].length>40));if(-1!==l)throw $.error(o("Docker.App.Install.index_4",[l+1])),new Error("validate");for(let e=0;e<a.length;e++)if(!H(a[e].split(":")[0]))throw $.error(o("Docker.App.Install.index_5",[e+1,a[e]])),new Error("validate")}const a=Object.entries(m.value),l=[];for(let n=0;n<a.length;n++){const[,e]=a[n];if(null===e.name||null===e.service_name)throw $.error(o("Docker.App.Install.index_6")),new Error("validate");l.push({appname:e.name,service_name:e.service_name})}const t=c.version||"",s=(e=>{if(!(e.indexOf(".")>-1))return null;const a=e.split(".");return 3===a.length?{x:a[0],yz:"".concat(a[1],".").concat(a[2])}:2===a.length?{x:a[0],yz:a[1]}:null})(t);return{...k(c),...k(v.value),app_name:n.value.appname,disable_domain:Number(!v.value.domain),allow_access:Number(v.value.allow_access),version:t,m_version:s?s.x:t,s_version:s?s.yz:"",...l.length>0?{depend_app:JSON.stringify(l)}:{}}})();var a;await(a=e,I.post("/mod/docker/com/create_app",a,{requestOptions:{loading:q.global.t("Docker.api.App.index_2"),successMessage:!0}})),i.setType("installed"),i.setRefresh(!0)}}),(e,a)=>{const l=pe,s=ne,p=re,o=t;return x(),_("div",Ee,[u(o,{model:h(c),"label-width":"150"},{default:g((()=>[u(s,{label:e.$t("Docker.App.Install.index_1")},{default:g((()=>[b("div",Ie,[u(l,{value:h(c).service_name,"onUpdate:value":a[0]||(a[0]=e=>h(c).service_name=e),placeholder:e.$t("Docker.App.Install.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),u(s,{label:e.$t("Docker.App.Install.index_3")},{default:g((()=>[b("div",qe,[u(p,{value:h(c).version,"onUpdate:value":a[1]||(a[1]=e=>h(c).version=e),options:h(w)},null,8,["value","options"])])])),_:1},8,["label"]),u(h(Se),{data:h(v),"onUpdate:data":a[2]||(a[2]=e=>y(v)?v.value=e:null),config:h(n).field||[]},null,8,["data","config"]),u(h(ze),{data:h(m),"onUpdate:data":a[3]||(a[3]=e=>y(m)?m.value=e:null),config:h(n).depend||[],onClose:A},null,8,["data","config"])])),_:1},8,["model"])])}}}),Ue=e=>{Y({title:q.global.t("Docker.App.index_7",[e.apptitle]),width:800,footer:!0,data:{app:e},component:Re})},Me={class:"p-20px"},Te={key:1,class:"flex-center h-160px"},Be=n({__name:"index",props:{app:{}},setup(e){const a=d(e,"app");return(e,l)=>{const t=V,s=W,n=ce;return x(),_("div",Me,[h(a).appinfo?(x(),w(s,{key:0,class:"max-h-460px overflow-auto",column:1,bordered:!0,"label-placement":"left","label-style":{width:"180px",color:"#999"}},{default:g((()=>[(x(!0),_(v,null,A(h(a).appinfo,(e=>(x(),w(t,{key:e.fieldKey,label:e.fieldTitle},{default:g((()=>[D(C(e.fieldValue),1)])),_:2},1032,["label"])))),128))])),_:1})):(x(),_("div",Te,[u(n)]))])}}});function Fe(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!m(e)}const Le=T({display:"grid",gap:"16px",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",padding:"4px"}),Ne=n({name:"DockerAppList",props:{loading:{type:Boolean,default:!1},data:{type:Object,default:()=>({install:[],installed:[]})}},setup(e){const a=B(),{type:l}=o(a),t=d(e,"data"),s=c((()=>"installed"===l.value?t.value.installed:t.value.install)),n=c((()=>s.value.length>0));return()=>u(v,null,[j(u("div",{class:Le},[u(J,{height:"140px"},null),u(J,{height:"140px"},null),u(J,{height:"140px"},null),u(J,{height:"140px"},null),u(J,{height:"140px"},null)]),[[O,e.loading]]),j(u("div",{class:Le},[s.value.map((e=>u(He,{type:l.value,data:e},null)))]),[[O,!e.loading&&n.value]]),j(u("div",{class:"pt-120px"},[u(ce,{size:"large"},null)]),[[O,!e.loading&&!n.value]])])}}),$e=T({display:"flex",justifyContent:"space-between",padding:"16px",border:"1px solid #FFFFFF",borderRadius:"4px",transition:"all .3s",boxShadow:"0 0 6px rgba(0, 0, 0, 0.15)","&:hover":{border:"1px solid #20a53a80"},".n-image":{display:"flex",alignItems:"center",justifyContent:"center",width:"46px",height:"46px",borderRadius:"50%",border:"1px solid #EEEEEE",boxShadow:"0 0 6px rgba(0, 0, 0, .15)"},".n-tag":{"--n-height":"24px"}}),He=n({name:"DockerAppItem",props:{type:{type:String,default:"all"},data:{type:Object,required:!0}},setup(e){const a=c((()=>{const a=e.data.appname.replace(/-+[{0-9},.,]+$/,"");return"".concat(K,"images/soft-ico/dkapp/ico-dkapp_").concat(a,".png")}));return()=>u("div",{class:$e},[u(ue,{class:"mr-12px",width:38,height:38,lazy:!0,src:a.value,"preview-disabled":!0,"object-fit":"contain"},null),Ve(e.type,e.data)])}});function Ve(e,a){return u("installed"===e?Ge:Je,{data:a},null)}const We=T({flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"128px",".label-tag":{"--n-color":"#f4f4f5","--n-border":"1px solid #e9e9eb","--n-text-color":"#909399"}}),Je=n({name:"DockerAppInstall",props:{data:{type:Object,required:!0}},setup(e){const a=d(e,"data"),{t:l}=p(),t=B();return()=>{let e;return u("div",{class:We},[u("div",{class:"flex justify-between"},[u("div",{class:"flex-1 mr-16px"},[u("div",{class:"flex items-center"},[u("span",{class:"leading-22px text-16px font-600 text-default"},[a.value.apptitle]),a.value.installedCount?u("a",{class:"bt-link ml-12px",href:"javascript:;",onClick:()=>{t.setType("installed"),t.setRefresh(!0)}},[l("Docker.App.app_list_0",[a.value.installedCount])]):"",a.value.help?u("a",{class:"bt-link ml-12px",href:a.value.help,target:"_blank"},[">>"+l("Public.Btn.Help")]):""]),u("div",{class:"mt-8px text-default"},[a.value.appdesc||"--"])]),u(de,{type:"primary",secondary:!0,onClick:()=>{Ue(a.value)}},Fe(e=l("Public.Btn.Install"))?e:{default:()=>[e]})]),u("div",{class:"flex flex-wrap gap-8px mt-8px"},[u(ve,{class:"label-tag"},{default:()=>[a.value.appTypeCN]})])])}}}),Ke=T({flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"138px",".info-tag":{"--n-color":"#fff","--n-border":"1px solid #d3d4d6","--n-text-color":"#909399"},".n-button.error":{"--n-color-hover":"#fef0f0","--n-border-hover":"1px solid #fbc4c4","--n-border-focus":"1px solid #fbc4c4","--n-border-pressed":"1px solid #fbc4c4","--n-text-color-hover":"#f56c6c","--n-text-color-focus":"#fef0f0","--n-text-color-pressed":"#fef0f0"}}),Qe=T(e||(e=a(l(Xe=["\n\tanimation: rotating 2s linear infinite;\n\n\t@keyframes rotating {\n\t\t0% {\n\t\t\ttransform: rotate(0);\n\t\t}\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n"],"raw",{value:a(Ze||Xe.slice())}))));var Xe,Ze;const Ge=n({name:"DockerAppInstalled",props:{data:{type:Object,required:!0}},setup(e){const{t:a}=p(),l=d(e,"data"),t=B(),s=P(),n=c((()=>{const e=[a("Public.Status.Abnormal"),"warning"];switch(l.value.status){case"running":e[0]=a("Public.Status.Running"),e[1]="success";break;case"exited":e[0]=a("Public.Status.Stopped"),e[1]="error";break;case"initializing":e[0]=a("Docker.App.app_list_1"),e[1]="default"}return e})),o=()=>{Y({title:a("Docker.App.app_list_2"),width:820,height:556,data:{app:l.value},component:S((()=>Z((()=>import("./index141.js?v=1752142539265")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))))})},i=new Map([["start",a("Public.Status.Start").toLocaleLowerCase()],["stop",a("Public.Status.Stop").toLocaleLowerCase()],["restart",a("Public.Status.Restart").toLocaleLowerCase()],["rebuild",a("Public.Btn.Rebuild").toLocaleLowerCase()]]),m=e=>{ee({title:a("Public.Confirm.Title"),content:a("Docker.App.app_list_4",[i.get(e),l.value.service_name]),onConfirm:async()=>{var a;await(a={service_name:l.value.service_name,app_name:l.value.appname,status:e},I.post("/mod/docker/com/set_app_status",a,{requestOptions:{loading:q.global.t("Docker.api.App.index_3"),successMessage:!0}})),t.setRefresh(!0)}})},f=()=>{const e=r(!1);ee({title:a("Public.Confirm.Title"),content:()=>{let t;return u(v,null,[u("div",{class:"mb-16px"},[a("Docker.App.app_list_6",[l.value.service_name])]),u(ie,{checked:e.value,"onUpdate:checked":a=>e.value=a},Fe(t=a("Docker.App.app_list_8"))?t:{default:()=>[t]})])},onConfirm:async()=>{var a;await(a={id:l.value.id,delete_data:e.value?1:0},I.post("/mod/docker/com/remove_app",a,{requestOptions:{loading:q.global.t("Docker.api.App.index_4"),successMessage:!0}})),t.setRefresh(!0)}})};return()=>{let e,t,p,i,r,c,d;return u("div",{class:Ke},[u("div",{class:"flex justify-between"},[u("div",{class:"flex-1 mr-16px"},[u("div",{class:"flex items-center text-#555"},[u("div",{class:"min-w-0 leading-22px text-16px text-default"},[u("div",{class:"max-w-full truncate",title:l.value.service_name},[l.value.service_name])]),u("div",{class:"ml-8px",onClick:()=>{"initializing"===l.value.status&&o()}},[u(ve,{type:n.value[1],class:"initializing"===l.value.status?"cursor-pointer":""},{default:()=>[n.value[0],"initializing"===l.value.status?u(U,{class:[Qe,"ml-4px"],name:"base-loading"},null):""]})]),u(me,null,{trigger:()=>u("div",{class:"ml-8px text-default hover:text-primary cursor-pointer",onClick:()=>{X("Path",l.value.path),s.push("/files")}},[u(U,{name:"base-folder-open",size:18},null)]),default:()=>a("Docker.App.app_list_9")}),u(me,null,{trigger:()=>u("div",{class:"ml-8px text-default hover:text-primary cursor-pointer",onClick:()=>{o()}},[u(U,{name:"base-left-logs",size:18},null)]),default:()=>a("Docker.App.app_list_10")}),u("span",{class:"ml-8px"},[a("Docker.App.app_list_11"),l.value.createat])]),u("div",{class:"flex items-center gap-8px mt-8px"},[u(ve,{class:"info-tag",size:"small"},{default:()=>[a("Docker.App.app_list_12"),l.value.m_version+(l.value.s_version?".":"")+l.value.s_version]}),u(Ye,{port:l.value.port||[]},null)]),l.value.domain?u("div",{class:"flex items-center gap-8px mt-8px"},[u(me,null,{trigger:()=>u("div",{onClick:()=>{window.open("http://".concat(l.value.domain))}},[u(ve,{class:"info-tag cursor-pointer",size:"small"},{default:()=>[u(U,{class:"hover:text-primary",name:"base-max-black",size:"14"},null),u("span",{class:"ml-4px"},[a("Docker.App.app_list_14"),l.value.domain])]})]),default:()=>u("span",null,[a("Docker.App.app_list_15"),l.value.domain])}),u("a",{class:"bt-link",href:"javascript:;",onClick:()=>{s.push("/site/proxy")}},[">".concat(a("Docker.App.app_list_16"))])]):""]),u(de,{size:"small",onClick:()=>{Y({title:a("Docker.App.app_list_3"),width:920,minHeight:280,data:{app:l.value},component:S((()=>Z((()=>import("./index142.js?v=1752142539265")),__vite__mapDeps([20,21,22,3,4,2,5,6,7,8,9,23,13,14,15,16,17,18,19,24]))))})}},Fe(e=a("Docker.App.app_list_17"))?e:{default:()=>[e]})]),u("div",null,[u(Q,null,null),u("div",{class:"flex gap-10px mt-10px"},["exited"===l.value.status?u(de,{size:"small",onClick:()=>{m("start")}},Fe(t=a("Public.Status.Start"))?t:{default:()=>[t]}):"","exited"!==l.value.status?u(de,{size:"small",onClick:()=>{m("stop")}},Fe(p=a("Public.Status.Stop"))?p:{default:()=>[p]}):"",u(de,{size:"small",onClick:()=>{m("restart")}},Fe(i=a("Public.Status.Restart"))?i:{default:()=>[i]}),u(de,{size:"small",onClick:()=>{Y({title:a("Docker.App.app_list_5"),width:640,data:{app:l.value},component:Be})}},Fe(r=a("Public.Btn.Details"))?r:{default:()=>[r]}),u(de,{size:"small",class:"error",onClick:()=>{m("rebuild")}},Fe(c=a("Public.Btn.Rebuild"))?c:{default:()=>[c]}),u(de,{size:"small",class:"error",onClick:()=>{f()}},Fe(d=a("Public.Btn.Uninstall"))?d:{default:()=>[d]})])])])}}}),Ye=n({name:"PortTags",functional:!0,props:{port:{type:Array,default:()=>[]}},setup(e){const{t:a}=p(),l=c((()=>e.port.slice(0,2))),t=c((()=>e.port.slice(2)));return()=>u(v,null,[l.value.map((e=>u(ve,{class:"info-tag",size:"small",key:e},{default:()=>[a("Docker.App.app_list_13"),e]}))),t.value.length>0?u(me,null,{trigger:()=>u(ve,{class:"info-tag"},{default:()=>[D("+"),t.value.length]}),default:()=>t.value.join(a("Public.Punctuation.Comma"))}):""])}}),ea={class:"flex-1 flex items-center justify-between"},aa=G(n({__name:"index",setup(e){const a=B(),{type:l,refresh:n}=o(a),p=r(),{height:i}=ae(p),{loading:c,setLoading:d}=le(),v=f({p:1,row:300,query:"",force:0}),m=f({install:[],installed:[]}),_=async()=>{try{d(!0),"installed"===l.value?await O():await j()}finally{d(!1)}},A=()=>({...k(v),app_type:"installed"===l.value?"all":l.value}),j=async()=>{const{message:e}=await ge(A());1===v.force&&(v.force=0),F(e)&&(m.install=M(e.data)?e.data:[],a.setMaxCpu(e.maximum_cpu),a.setMaxMemory(e.maximum_memory))},O=async()=>{const{message:e}=await((e,a=!1)=>I.post("/mod/docker/com/get_installed_apps",e,{requestOptions:{loading:a?q.global.t("Docker.api.App.index_1"):""}}))(A());F(e)&&(m.installed=M(e.data)?e.data:[])},P=()=>{v.p=1,_()},S=()=>{v.query="",P()},R=()=>{v.force=1,P()};return z((()=>n.value),(e=>{e&&(a.setRefresh(!1),P())})),_(),(e,a)=>{const n=s,o=de,r=ne,d=t,f=fe;return x(),w(f,{class:"p-16px"},{default:g((()=>[u(d,{class:"mb-8px p-4px","label-align":"left","label-width":"0"},{default:g((()=>[u(r,{label:"","show-feedback":!1,"label-style":{paddingRight:"0"}},{default:g((()=>[u(n,{value:h(v).query,"onUpdate:value":a[0]||(a[0]=e=>h(v).query=e),width:460,prefix:!0,placeholder:e.$t("Docker.App.index_1"),onSearch:P},null,8,["value","placeholder"]),u(o,{type:"primary",class:"ml-10px",onClick:P},{default:g((()=>[D(C(e.$t("Public.Btn.Search")),1)])),_:1})])),_:1}),u(r,{class:"mt-20px",label:"","show-feedback":!1,"label-style":{paddingRight:"0"}},{default:g((()=>[b("div",ea,[u(h(Ce),{value:h(l),"onUpdate:value":[a[1]||(a[1]=e=>y(l)?l.value=e:null),S]},null,8,["value"]),u(o,{onClick:R},{default:g((()=>[D(C(e.$t("Docker.App.index_2")),1)])),_:1})])])),_:1})])),_:1}),b("div",{ref_key:"scrollbarRef",ref:p,class:"overflow-auto",style:E({height:h(i)})},[u(h(Ne),{loading:h(c),data:h(m)},null,8,["loading","data"])],4)])),_:1})}}}),[["__scopeId","data-v-ff0af478"]]),la=Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"}));export{he as a,ye as b,ke as c,we as d,be as g,la as i,Ae as r,De as u};
