import{_ as e}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1752142539265";import{b as a,h as t,al as i,d as s,c as n,f as r}from"./public.js?v=1752142539265";import{b0 as o,X as d,n as l,f7 as m,f8 as _,w as p,m as c,f9 as f,fa as b}from"./page_layout.js?v=1752142539265";import{ay as u}from"./naive.js?v=1752142539265";import{k as x,P as h,U as w,X as y,Q as g,a2 as D,W as j,j as k,a3 as v}from"./vue.js?v=1752142539265";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1752142539265";import"./common.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";const L={class:"p-20px"},C=x({__name:"index",props:{data:{}},setup(x){const{t:C}=h(),R=x,{sid:z}=R.data,E=o(),P=async()=>{if(null===z)throw c.error(C("Database.redis.index_8")),new Error(C("Database.redis.index_9"));await f({sid:z}),H()},{table:S,columns:T}=a([{key:"name",title:C("Database.redis.index_36"),width:180,ellipsis:{tooltip:{width:"trigger"}}},{key:"filepath",title:C("Database.redis.index_10"),ellipsis:{tooltip:{width:"trigger"}}},{key:"mtime",title:C("Site.TableRow.index_25"),width:150,render:e=>d(e.mtime)},{key:"size",title:C("Site.TableRow.index_23"),width:80,render:e=>l(e.size)},{key:"sid",title:C("Database.redis.index_11"),width:120,render:e=>{let a="--";for(let t=0;t<E.remoteList.length;t++)if("".concat(E.remoteList[t].id)===e.sid){a=E.remoteList[t].ps||E.remoteList[t].db_host;break}return a}},t({width:100,options:e=>[{label:C("Database.tools.index_3"),onClick:()=>{i({text:C("Database.redis.index_12"),title:C("Database.redis.index_12"),content:C("Database.redis.index_13",[e.name]),onConfirm:async({hide:a})=>{if(null===z)throw new Error(C("Database.redis.index_9"));await b({file:e.filepath,sid:z}),E.setRefresh(!0),a()}})}},{label:C("Public.Btn.Del"),onClick:()=>{s({title:C("Database.redis.index_14"),content:C("Database.redis.index_15",[e.name]),onConfirm:async({hide:a})=>{await m({file:e.filepath}),H(),a()}})}}]})]),{loading:X,setLoading:B}=n(),H=async()=>{try{B(!0);const{message:e}=await _();S.data=p(e)?e:[]}finally{B(!1)}};return H(),(a,t)=>{const i=u,s=r,n=e;return y(),w("div",L,[g(n,null,{toolsLeft:D((()=>[g(i,{type:"primary",onClick:P},{default:D((()=>[k(v(a.$t("Database.index_16")),1)])),_:1})])),table:D((()=>[g(s,{"max-height":400,loading:j(X),columns:j(T),data:j(S).data},null,8,["loading","columns","data"])])),_:1})])}}});export{C as default};
