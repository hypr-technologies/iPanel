import{m as a,cq as s,d as e,bZ as n,c as t}from"./page_layout.js?v=1752142539265";import{p as l}from"./soft.js?v=1752142539265";import{c as i,d as o}from"./public.js?v=1752142539265";import{cD as r,ay as u,bX as p}from"./naive.js?v=1752142539265";import{k as m,P as v,r as c,a1 as d,X as _,a2 as f,V as g,Q as y,a3 as x,W as j,ah as b,j as P}from"./vue.js?v=1752142539265";const w=m({__name:"index",setup(m,{expose:w}){const{t:C}=v(),F=c(),h=c(),k=c([]),N=()=>{h.value!==F.value?o({title:C("Public.Btn.Install"),content:C("Plugin.Ftp.index_12",[l.title,F.value]),onConfirm:()=>{X()}}):a.error(C("Plugin.Ftp.index_11"))},X=async(a=1)=>{const{message:t}=await s({sName:l.name,version:F.value,type:a});e(t)&&t.result&&n()},{loading:$,setLoading:q}=i(),B=async()=>{try{q(!0);const{message:a}=await t({sName:"pure-ftpd"===l.name?"pureftpd":l.name});e(a)&&(k.value=a.versions.map((s=>(1==s.m_version.length?F.value=a.version.split(".")[0]:F.value=a.version.split(".")[0]+"."+a.version.split(".")[1],h.value=F.value,{label:"".concat(a.name," ").concat(s.m_version),value:s.m_version}))))}finally{q(!1)}};return B(),w({init:B}),(a,s)=>{const e=r,n=u,t=p;return _(),d(t,{class:"items-center"},{default:f((()=>[g("span",null,x(a.$t("Plugin.Ftp.index_9")),1),y(e,{class:"w-200px",loading:j($),value:j(F),"onUpdate:value":s[0]||(s[0]=a=>b(F)?F.value=a:null),options:j(k)},null,8,["loading","value","options"]),y(n,{type:"primary",onClick:N},{default:f((()=>[P(x(a.$t("Site.Cert.index_61")),1)])),_:1})])),_:1})}}});export{w as _};
