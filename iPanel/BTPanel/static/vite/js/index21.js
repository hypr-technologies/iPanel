const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index118.js?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang4.js?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang7.js?v=1752142539265","js/page_layout.js?v=1752142539265","js/vue.js?v=1752142539265","js/__commonjsHelpers__.js?v=1752142539265","js/naive.js?v=1752142539265","js/common.js?v=1752142539265","js/public.js?v=1752142539265","css/public.css?v=1752142539265","css/page_layout.css?v=1752142539265","css/index16.css?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang5.js?v=1752142539265","js/index.js?v=1752142539265","css/index96.css?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang11.js?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang6.js?v=1752142539265","js/index102.js?v=1752142539265","css/index19.css?v=1752142539265","js/index.vue_vue_type_script_setup_true_lang.js?v=1752142539265","js/theme-chrome.js?v=1752142539265","js/organization.js?v=1752142539265","js/index119.js?v=1752142539265","js/index101.js?v=1752142539265","css/index18.css?v=1752142539265","js/custom.js?v=1752142539265"])))=>i.map(i=>d[i]);
import{v as e,i as a,X as t,d as n,x as l,a as i,w as r}from"./page_layout.js?v=1752142539265";import{_ as s}from"./index.js?v=1752142539265";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1752142539265";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1752142539265";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1752142539265";import{_ as c,b as _,h as u,e as m,d as g,c as b,f as x}from"./public.js?v=1752142539265";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1752142539265";import{_ as y}from"./index102.js?v=1752142539265";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang.js?v=1752142539265";import{V as w}from"./theme-chrome.js?v=1752142539265";import{k as f,P as C,r as k,e as S,U as T,X as j,Q as U,a2 as P,W as E,a1 as O,an as $,V as D,a3 as L,N as R,ah as q,j as A,_ as I}from"./vue.js?v=1752142539265";import{cz as z,aq as N,cD as J,bX as M,ay as V,cA as F}from"./naive.js?v=1752142539265";import{g as X}from"./organization.js?v=1752142539265";const{t:K}=a.global,W=a=>e.post("/crontab/script/test_script",{data:JSON.stringify(a)},{requestOptions:{loading:K("Crontab.Api.index_4"),errorMessage:!1}}),B=a=>e.post("/crontab/script/get_script_logs",{data:JSON.stringify(a)}),Q=(a,t=!0)=>e.post("/crontab/script/remove_script",a,{requestOptions:{loading:t?K("Security.Api.Index_3"):"",successMessage:t}}),G={class:"p-20px"},H=f({__name:"index",props:{data:{}},setup(a,{expose:t}){const{t:n}=C(),l=a,{isEdit:i,row:r,id:s,getList:o}=l.data,d=k(null),p=[{value:"string",label:n("Crontab.Script.index_9")},{value:"int",label:n("Crontab.Script.index_10")},{value:"float",label:n("Crontab.Script.index_11")}],_=[{value:"1",label:n("Crontab.Script.index_12")},{value:"0",label:n("Crontab.Script.index_13")}],u={name:{required:!0,trigger:["blur","change"],message:n("Crontab.Planned.index_49")},custom:{required:!0,trigger:["blur","change"],message:n("Crontab.arrange.index_28")},argsTitle:{required:!0,trigger:["blur","change"],message:n("Security.Conf.Index_28")},argsExplain:{required:!0,trigger:["blur","change"],message:n("Security.Conf.Index_28")}},m=S({name:"",type:"string",argsType:"0",argsTitle:"",argsExplain:"",custom:"",remark:""}),g=()=>({name:m.name,return_type:m.type,is_args:m.argsType,ps:m.remark,script:m.custom,type_id:s,args_title:m.argsTitle,args_ps:m.argsExplain,...i?{script_id:null==r?void 0:r.script_id}:null});t({onConfirm:async()=>{var a,t;await(null==(a=d.value)?void 0:a.validate()),i?await(t=g(),e.post("/crontab/script/modify_script",{data:JSON.stringify(t)},{requestOptions:{loading:K("Crontab.Api.index_5"),successMessage:!0}})):await(a=>e.post("/crontab/script/create_script",{data:JSON.stringify(a)},{requestOptions:{loading:K("Security.Api.Index_4"),successMessage:!0}}))(g()),null==o||o()}});return i&&r&&(m.name=r.name,m.type=r.return_type,m.argsType=r.is_args.toString(),m.argsTitle=r.args_title,m.argsExplain=r.args_ps,m.custom=r.script,m.remark=r.ps),(e,a)=>{const t=N,n=z,l=J,i=M,r=v,s=c;return j(),T("div",G,[U(r,{ref_key:"formRef",ref:d,model:E(m),rules:u},{default:P((()=>[U(n,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:P((()=>[U(t,{class:"w-360px!",value:E(m).name,"onUpdate:value":a[0]||(a[0]=e=>E(m).name=e),placeholder:e.$t("Crontab.Planned.index_49")},null,8,["value","placeholder"])])),_:1},8,["label"]),U(n,{label:e.$t("Crontab.Script.index_2")},{default:P((()=>[U(l,{class:"w-150px!",value:E(m).type,"onUpdate:value":a[1]||(a[1]=e=>E(m).type=e),options:p},null,8,["value"])])),_:1},8,["label"]),U(i,null,{default:P((()=>[U(n,{label:e.$t("Crontab.Script.index_5")},{default:P((()=>[U(l,{class:"w-80px!",value:E(m).argsType,"onUpdate:value":a[2]||(a[2]=e=>E(m).argsType=e),options:_},null,8,["value"])])),_:1},8,["label"]),"1"==E(m).argsType?(j(),O(n,{key:0,path:"argsTitle"},{default:P((()=>[U(t,{class:"w-110px!",value:E(m).argsTitle,"onUpdate:value":a[3]||(a[3]=e=>E(m).argsTitle=e),placeholder:e.$t("Crontab.Script.index_51")},null,8,["value","placeholder"])])),_:1})):$("",!0),"1"==E(m).argsType?(j(),O(n,{key:1,path:"argsExplain"},{default:P((()=>[U(t,{class:"w-145px!",value:E(m).argsExplain,"onUpdate:value":a[4]||(a[4]=e=>E(m).argsExplain=e),placeholder:e.$t("Crontab.Script.index_52")},null,8,["value","placeholder"])])),_:1})):$("",!0)])),_:1}),U(n,{label:" ",path:"custom"},{default:P((()=>[U(E(w),{theme:"chrome",value:E(m).custom,"onUpdate:value":a[5]||(a[5]=e=>E(m).custom=e),class:"w-360px border-solid h-150px border-1px border-#ccc rounded-4px leading-[1.4]"},null,8,["value"])])),_:1}),U(n,{label:e.$t("Docker.Template.add.index_3")},{default:P((()=>[U(t,{class:"w-360px!",value:E(m).remark,"onUpdate:value":a[6]||(a[6]=e=>E(m).remark=e),placeholder:e.$t("Crontab.arrange.index_27")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),U(s,null,{default:P((()=>[D("li",null,L(e.$t("Crontab.Script.index_6")),1),D("li",null,L(e.$t("Crontab.Script.index_7")),1),D("li",null,L(e.$t("Crontab.Script.index_8")),1)])),_:1})])}}}),Y=f({__name:"index",setup(a){const c=I((()=>i((()=>import("./index118.js?v=1752142539265")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])))),v=I((()=>i((()=>import("./index119.js?v=1752142539265")),__vite__mapDeps([22,23,4,5,3,6,7,8,9,10,24,13,14,1,2,11,12,15,16,17,18,19,20,21])))),w=I((()=>i((()=>import("./custom.js?v=1752142539265")),__vite__mapDeps([25,19,6,4,5,7])))),f=k("1"),T=k([]),{t:$}=C(),D=()=>{Z.data.isEdit=!1,Z.data.id=f.value,Z.show=!0},{keys:z,table:N,columns:J}=_([{type:"selection",width:40},{key:"name",title:$("Site.TableRow.index_2")},{key:"script_type",title:$("Ftp.Table.index_3")},{key:"return_type",title:$("Crontab.Script.index_2")},{key:"ps",title:$("Docker.Template.add.index_3")},{key:"name",title:$("Docker.Container.index_9"),render:e=>t(e.create_time)},{key:"name",title:$("Crontab.Planned.index_12"),render:e=>t(e.last_exec_time)},u({title:$("Public.Table.Operation"),width:240,options:e=>[{label:$("Docker.LocalImage.pull.index_12"),onClick:()=>{if(e.is_args)return te.show=!0,void(te.data.row=e);Y("",e)}},{label:$("Site.TableOP.index_7"),onClick:()=>{Z.title=$("Crontab.arrange.index_38"),Z.data.isEdit=!0,Z.data.row=e,Z.data.id=f.value,Z.show=!0}},{label:$("Ftp.Table.index_15"),onClick:()=>{ee.title=$("Crontab.Planned.index_6",[e.name]),ee.data.id=e.script_id,ee.show=!0}},{label:$("Public.Btn.Del"),onClick:()=>{g({title:"".concat($("Ftp.Table.index_10")," ").concat(e.name," ").concat($("Crontab.Script.index_3")),content:$("Crontab.Script.index_4"),onConfirm:async()=>{await Q({script_id:e.script_id}),G()}})}}]})]),M=[{key:"delete",type:"confirm",label:$("Crontab.Script.index_42"),confirm:{title:$("Crontab.Planned.index_16",[$("Crontab.Script.index_42")]),desc:$("Crontab.Planned.index_17",[$("Crontab.Script.index_42")]),columns:[J.value[1]],api:e=>Q({script_id:e.script_id},!1),done:()=>{G()}}}],K=S({p:1,rows:10,search:""}),{loading:W,setLoading:B}=b(!0);(async()=>{const{message:e}=await X();r(e)&&(T.value=e.map((e=>({label:e.name,key:e.type_id.toString()}))))})();const G=async()=>{try{B(!0);const{message:t}=await(a=R({...K,type_id:f.value}),e.post("/crontab/script/get_script_list",{data:JSON.stringify(a)}));n(t)?(N.data=t.data.map((e=>({...e,id:e.script_id}))),N.total=l(t.page)):(N.data=[],N.total=0)}finally{z.value=[],B(!1)}var a};G();const Y=(e,a)=>{g({title:$("Crontab.Planned.index_13"),content:$("Crontab.arrange.index_1",[a.name]),onConfirm:()=>{ae.data.row=a,ae.data.args=e,ae.show=!0}})},Z=m($("Crontab.Script.index_1"),{getList:G}),ee=m(),ae=m($("Crontab.Planned.index_23"),{getList:G}),te=m($("Crontab.Script.index_44"),{callback:Y});return(e,a)=>{const t=y,n=V,l=h,i=x,r=p,_=d,u=o,m=s,g=F;return j(),O(g,{class:"p-16px"},{default:P((()=>[U(t,{value:E(f),"onUpdate:value":[a[0]||(a[0]=e=>q(f)?f.value=e:null),G],options:E(T)},null,8,["value","options"]),U(u,null,{toolsLeft:P((()=>[U(n,{type:"primary",onClick:D},{default:P((()=>[A(L(e.$t("Crontab.Script.index_1")),1)])),_:1})])),toolsRight:P((()=>[U(l,{value:E(K).search,"onUpdate:value":a[1]||(a[1]=e=>E(K).search=e),placeholder:e.$t("WP.Sets.index_15"),onSearch:G},null,8,["value","placeholder"])])),table:P((()=>[U(i,{"checked-row-keys":E(z),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>q(z)?z.value=e:null),loading:E(W),data:E(N).data,columns:E(J)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:P((()=>[U(r,{"checked-row-keys":E(z),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>q(z)?z.value=e:null),data:E(N).data,options:M},null,8,["checked-row-keys","data"])])),pageRight:P((()=>[U(_,{page:E(K).p,"onUpdate:page":a[4]||(a[4]=e=>E(K).p=e),"page-size":E(K).rows,"onUpdate:pageSize":a[5]||(a[5]=e=>E(K).rows=e),"item-count":E(N).total,onRefresh:G},null,8,["page","page-size","item-count"])])),_:1}),U(m,{show:E(Z).show,"onUpdate:show":a[6]||(a[6]=e=>E(Z).show=e),title:E(Z).title,data:E(Z).data,width:600,footer:!0,component:H},null,8,["show","title","data"]),U(m,{show:E(ae).show,"onUpdate:show":a[7]||(a[7]=e=>E(ae).show=e),title:E(ae).title,data:E(ae).data,width:400,"min-height":200,component:E(v)},null,8,["show","title","data","component"]),U(m,{show:E(te).show,"onUpdate:show":a[8]||(a[8]=e=>E(te).show=e),title:E(te).title,data:E(te).data,width:400,footer:!0,component:E(w)},null,8,["show","title","data","component"]),U(m,{show:E(ee).show,"onUpdate:show":a[9]||(a[9]=e=>E(ee).show=e),title:E(ee).title,data:E(ee).data,width:800,"min-height":550,footer:!1,component:E(c)},null,8,["show","title","data","component"])])),_:1})}}}),Z=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{W as e,B as g,Z as i};
