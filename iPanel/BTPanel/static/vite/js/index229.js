import{_ as e}from"./index184.js?v=1752142539265";import{_ as a}from"./index102.js?v=1752142539265";import{u as l}from"./index224.js?v=1752142539265";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang14.js?v=1752142539265";import{ay as n,cz as i,cD as s,c1 as o}from"./naive.js?v=1752142539265";import{k as u,P as r,r as p,o as d,U as v,X as m,Q as _,V as c,W as f,ah as P,a2 as x,j as h,a3 as y,n as g,e as w,N as b}from"./vue.js?v=1752142539265";import{c as S,_ as H}from"./public.js?v=1752142539265";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang.js?v=1752142539265";import{d as k,w as $,f as C,m as U}from"./page_layout.js?v=1752142539265";import{b8 as D,b9 as L,b as R,ba as B}from"./site.js?v=1752142539265";import{f as E,h as V}from"./php.js?v=1752142539265";import"./theme-chrome.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";import"./file.js?v=1752142539265";import"./common.js?v=1752142539265";const q={class:"mt-12px"},z=u({__name:"DefaultPage",setup(e){const{t:i}=r(),s=l(),o=p(null),u=p("index"),w=new Map([["index",{label:i("Site.PHP.index_51"),path:"/www/server/panel/data/defaultDoc.html"}],["404",{label:i("Site.PHP.index_52"),path:"/www/server/panel/data/404.html"}],["blank",{label:i("Site.PHP.index_53"),path:"nginx"===s.web.type?"/www/server/nginx/html/index.html":"/www/server/apache/htdocs/index.html"}],["stop",{label:i("Site.PHP.index_54"),path:"/www/server/stop/index.html"}]]),b=(()=>{const e=[];return w.forEach(((a,l)=>{e.push({key:l,label:a.label})})),e})(),S=()=>{var e;return(null==(e=w.get(u.value))?void 0:e.path)||""},H=p(S()),j=()=>{H.value=S()},k=()=>{g((()=>{var e;null==(e=o.value)||e.getContent()}))},$=async()=>{var e;null==(e=o.value)||e.saveFile()};return d((()=>{var e;null==(e=o.value)||e.getContent()})),(e,l)=>{const i=a,s=n;return m(),v("div",null,[_(i,{value:f(u),"onUpdate:value":[l[0]||(l[0]=e=>P(u)?u.value=e:null),j],options:f(b),onClick:k},null,8,["value","options"]),_(t,{ref_key:"configRef",ref:o,path:f(H),"onUpdate:path":l[1]||(l[1]=e=>P(H)?H.value=e:null),height:440,"show-encoding":!0},null,8,["path"]),c("div",q,[_(s,{type:"primary",onClick:$},{default:x((()=>[h(y(e.$t("Site.Cert.index_60")),1)])),_:1})])])}}}),F={class:"w-300px"},M=u({__name:"DefaultSite",setup(e,{expose:a}){const{t:l}=r(),t=p(null),{loading:o,setLoading:u}=S(),d=w({name:"0"}),P=p([]),g=async()=>{try{u(!0);const{message:e}=await D();if(k(e)){const{sites:a,defaultSite:l}=e;P.value=$(a)?a.map((e=>({label:e.name,value:e.name}))):[],U(),d.name=C(l)?l:"0"}}finally{u(!1)}},U=()=>{P.value.unshift({label:l("Site.PHP.index_58"),value:"0"})},R=async()=>{var e;await(null==(e=t.value)?void 0:e.validate()),await L(b(d))};return U(),g(),a({init:g}),(e,a)=>{const l=s,u=i,r=j,p=n,g=H;return m(),v("div",null,[_(r,{ref_key:"formRef",ref:t,model:f(d)},{default:x((()=>[_(u,{label:e.$t("Site.PHP.index_11")},{default:x((()=>[c("div",F,[_(l,{value:f(d).name,"onUpdate:value":a[0]||(a[0]=e=>f(d).name=e),class:"name-select",loading:f(o),options:f(P)},null,8,["value","loading","options"])])])),_:1},8,["label"])])),_:1},8,["model"]),_(p,{type:"primary",onClick:R},{default:x((()=>[h(y(e.$t("Public.Btn.Save")),1)])),_:1}),_(g,{class:"mt-20px"},{default:x((()=>[c("li",null,y(e.$t("Site.PHP.index_56")),1),c("li",null,y(e.$t("Site.PHP.index_57")),1)])),_:1})])}}}),N={class:"w-300px"},Q=u({__name:"PhpVersion",setup(e,{expose:a}){const{t:l}=r(),t=p(null),{loading:o,setLoading:u}=S(),d=w({php_version:null}),P={php_version:{required:!0,message:l("Site.PHP.index_67"),trigger:"change"}},g=p([]),b=async()=>{try{u(!0);const{message:e}=await R();if(k(e)){const a=$(e.versions)?e.versions:[];g.value=a.map((e=>({label:e.name,value:e.version}))),k(e.select)&&(d.php_version="".concat(e.select.version))}}finally{u(!1)}},C=async()=>{var e;await(null==(e=t.value)?void 0:e.validate());const a=(()=>{const e=d.php_version;if(null===e)throw U.error(l("Site.PHP.index_67")),new Error(l("Site.PHP.index_67"));return{php_version:e}})();await B(a)};return b(),a({init:b}),(e,a)=>{const l=s,u=i,r=j,p=n,w=H;return m(),v("div",null,[_(r,{ref_key:"formRef",ref:t,model:f(d),rules:P},{default:x((()=>[_(u,{label:e.$t("Site.PHP.index_55"),path:"php_version"},{default:x((()=>[c("div",N,[_(l,{value:f(d).php_version,"onUpdate:value":a[0]||(a[0]=e=>f(d).php_version=e),class:"php-version-select",loading:f(o),options:f(g)},null,8,["value","loading","options"])])])),_:1},8,["label"])])),_:1},8,["model"]),_(p,{type:"primary",onClick:C},{default:x((()=>[h(y(e.$t("Public.Btn.Save")),1)])),_:1}),_(w,{class:"mt-20px"},{default:x((()=>[c("li",null,y(e.$t("Site.PHP.index_68")),1),c("li",null,y(e.$t("Site.PHP.index_69")),1)])),_:1})])}}}),W={class:"w-300px"},X=u({__name:"Https",setup(e,{expose:a}){const{loading:l,setLoading:t}=S(),n=w({value:!1}),s=async()=>{try{t(!0),await E()}catch(e){n.value=!n.value}finally{t(!1)}},u=async()=>{try{t(!0);const{message:e}=await V();k(e)&&(n.value=e.result)}finally{t(!1)}};return u(),a({init:u}),(e,a)=>{const t=o,u=i,r=j,p=H;return m(),v("div",null,[_(r,{model:f(n)},{default:x((()=>[_(u,{label:e.$t("Site.PHP.index_86")},{default:x((()=>[c("div",W,[_(t,{value:f(n).value,"onUpdate:value":[a[0]||(a[0]=e=>f(n).value=e),s],loading:f(l)},null,8,["value","loading"])])])),_:1},8,["label"])])),_:1},8,["model"]),_(p,{class:"mt-8px"},{default:x((()=>[c("li",null,y(e.$t("Site.PHP.index_87")),1),c("li",null,y(e.$t("Site.PHP.index_88")),1)])),_:1})])}}}),A={class:"h-full"},G=u({__name:"index",props:{menu:{type:String,default:"default-page"}},setup(a){const{t:l}=r(),t=p(a.menu),n=[{key:"default-page",label:l("Site.PHP.index_5"),component:z},{key:"default-site",label:l("Site.PHP.index_6"),component:M},{key:"php-version",label:l("Site.PHP.index_7"),component:Q},{key:"https",label:l("Site.PHP.index_86"),component:X}];return(a,l)=>{const i=e;return m(),v("div",A,[_(i,{value:f(t),"onUpdate:value":l[0]||(l[0]=e=>P(t)?t.value=e:null),data:n},null,8,["value"])])}}});export{G as default};
