System.register(["./page_layout-legacy.js?v=1752142539265","./index-legacy.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1752142539265","./public-legacy.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1752142539265","./index-legacy102.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1752142539265","./theme-chrome-legacy.js?v=1752142539265","./vue-legacy.js?v=1752142539265","./naive-legacy.js?v=1752142539265","./organization-legacy.js?v=1752142539265"],(function(e,t){"use strict";var a,l,n,i,r,o,s,d,p,c,u,_,g,b,x,y,m,h,v,w,C,f,S,k,T,j,U,$,P,O,E,q,D,L,R,z,N,A,I,J,M,F,X,K,V,W;return{setters:[e=>{a=e.v,l=e.i,n=e.X,i=e.d,r=e.x,o=e.a,s=e.w},e=>{d=e._},e=>{p=e._},e=>{c=e._},e=>{u=e._},e=>{_=e._,g=e.b,b=e.h,x=e.e,y=e.d,m=e.c,h=e.f},e=>{v=e._},e=>{w=e._},e=>{C=e._},e=>{f=e.V},e=>{S=e.k,k=e.P,T=e.r,j=e.e,U=e.U,$=e.X,P=e.Q,O=e.a2,E=e.W,q=e.a1,D=e.an,L=e.V,R=e.a3,z=e.N,N=e.ah,A=e.j,I=e._},e=>{J=e.cz,M=e.aq,F=e.cD,X=e.bX,K=e.ay,V=e.cA},e=>{W=e.g}],execute:function(){const{t:B}=l.global,Q=e=>a.post("/crontab/script/create_script",{data:JSON.stringify(e)},{requestOptions:{loading:B("Security.Api.Index_4"),successMessage:!0}}),G=e=>a.post("/crontab/script/modify_script",{data:JSON.stringify(e)},{requestOptions:{loading:B("Crontab.Api.index_5"),successMessage:!0}}),H=(e("e",(e=>a.post("/crontab/script/test_script",{data:JSON.stringify(e)},{requestOptions:{loading:B("Crontab.Api.index_4"),errorMessage:!1}}))),e("g",(e=>a.post("/crontab/script/get_script_logs",{data:JSON.stringify(e)}))),(e,t=!0)=>a.post("/crontab/script/remove_script",e,{requestOptions:{loading:t?B("Security.Api.Index_3"):"",successMessage:t}})),Y={class:"p-20px"},Z=S({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:a}=k(),l=e,{isEdit:n,row:i,id:r,getList:o}=l.data,s=T(null),d=[{value:"string",label:a("Crontab.Script.index_9")},{value:"int",label:a("Crontab.Script.index_10")},{value:"float",label:a("Crontab.Script.index_11")}],p=[{value:"1",label:a("Crontab.Script.index_12")},{value:"0",label:a("Crontab.Script.index_13")}],c={name:{required:!0,trigger:["blur","change"],message:a("Crontab.Planned.index_49")},custom:{required:!0,trigger:["blur","change"],message:a("Crontab.arrange.index_28")},argsTitle:{required:!0,trigger:["blur","change"],message:a("Security.Conf.Index_28")},argsExplain:{required:!0,trigger:["blur","change"],message:a("Security.Conf.Index_28")}},u=j({name:"",type:"string",argsType:"0",argsTitle:"",argsExplain:"",custom:"",remark:""}),g=()=>({name:u.name,return_type:u.type,is_args:u.argsType,ps:u.remark,script:u.custom,type_id:r,args_title:u.argsTitle,args_ps:u.argsExplain,...n?{script_id:i?.script_id}:null});return t({onConfirm:async()=>{await(s.value?.validate()),n?await G(g()):await Q(g()),o?.()}}),n&&i&&(u.name=i.name,u.type=i.return_type,u.argsType=i.is_args.toString(),u.argsTitle=i.args_title,u.argsExplain=i.args_ps,u.custom=i.script,u.remark=i.ps),(e,t)=>{const a=M,l=J,n=F,i=X,r=C,o=_;return $(),U("div",Y,[P(r,{ref_key:"formRef",ref:s,model:E(u),rules:c},{default:O((()=>[P(l,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:O((()=>[P(a,{class:"w-360px!",value:E(u).name,"onUpdate:value":t[0]||(t[0]=e=>E(u).name=e),placeholder:e.$t("Crontab.Planned.index_49")},null,8,["value","placeholder"])])),_:1},8,["label"]),P(l,{label:e.$t("Crontab.Script.index_2")},{default:O((()=>[P(n,{class:"w-150px!",value:E(u).type,"onUpdate:value":t[1]||(t[1]=e=>E(u).type=e),options:d},null,8,["value"])])),_:1},8,["label"]),P(i,null,{default:O((()=>[P(l,{label:e.$t("Crontab.Script.index_5")},{default:O((()=>[P(n,{class:"w-80px!",value:E(u).argsType,"onUpdate:value":t[2]||(t[2]=e=>E(u).argsType=e),options:p},null,8,["value"])])),_:1},8,["label"]),"1"==E(u).argsType?($(),q(l,{key:0,path:"argsTitle"},{default:O((()=>[P(a,{class:"w-110px!",value:E(u).argsTitle,"onUpdate:value":t[3]||(t[3]=e=>E(u).argsTitle=e),placeholder:e.$t("Crontab.Script.index_51")},null,8,["value","placeholder"])])),_:1})):D("",!0),"1"==E(u).argsType?($(),q(l,{key:1,path:"argsExplain"},{default:O((()=>[P(a,{class:"w-145px!",value:E(u).argsExplain,"onUpdate:value":t[4]||(t[4]=e=>E(u).argsExplain=e),placeholder:e.$t("Crontab.Script.index_52")},null,8,["value","placeholder"])])),_:1})):D("",!0)])),_:1}),P(l,{label:" ",path:"custom"},{default:O((()=>[P(E(f),{theme:"chrome",value:E(u).custom,"onUpdate:value":t[5]||(t[5]=e=>E(u).custom=e),class:"w-360px border-solid h-150px border-1px border-#ccc rounded-4px leading-[1.4]"},null,8,["value"])])),_:1}),P(l,{label:e.$t("Docker.Template.add.index_3")},{default:O((()=>[P(a,{class:"w-360px!",value:E(u).remark,"onUpdate:value":t[6]||(t[6]=e=>E(u).remark=e),placeholder:e.$t("Crontab.arrange.index_27")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),P(o,null,{default:O((()=>[L("li",null,R(e.$t("Crontab.Script.index_6")),1),L("li",null,R(e.$t("Crontab.Script.index_7")),1),L("li",null,R(e.$t("Crontab.Script.index_8")),1)])),_:1})])}}}),ee=S({__name:"index",setup(e){const l=I((()=>o((()=>t.import("./index-legacy118.js?v=1752142539265")),void 0))),_=I((()=>o((()=>t.import("./index-legacy119.js?v=1752142539265")),void 0))),C=I((()=>o((()=>t.import("./custom-legacy.js?v=1752142539265")),void 0))),f=T("1"),S=T([]),{t:U}=k(),D=()=>{ee.data.isEdit=!1,ee.data.id=f.value,ee.show=!0},{keys:L,table:J,columns:M}=g([{type:"selection",width:40},{key:"name",title:U("Site.TableRow.index_2")},{key:"script_type",title:U("Ftp.Table.index_3")},{key:"return_type",title:U("Crontab.Script.index_2")},{key:"ps",title:U("Docker.Template.add.index_3")},{key:"name",title:U("Docker.Container.index_9"),render:e=>n(e.create_time)},{key:"name",title:U("Crontab.Planned.index_12"),render:e=>n(e.last_exec_time)},b({title:U("Public.Table.Operation"),width:240,options:e=>[{label:U("Docker.LocalImage.pull.index_12"),onClick:()=>{if(e.is_args)return le.show=!0,void(le.data.row=e);Y("",e)}},{label:U("Site.TableOP.index_7"),onClick:()=>{ee.title=U("Crontab.arrange.index_38"),ee.data.isEdit=!0,ee.data.row=e,ee.data.id=f.value,ee.show=!0}},{label:U("Ftp.Table.index_15"),onClick:()=>{te.title=U("Crontab.Planned.index_6",[e.name]),te.data.id=e.script_id,te.show=!0}},{label:U("Public.Btn.Del"),onClick:()=>{y({title:`${U("Ftp.Table.index_10")} ${e.name} ${U("Crontab.Script.index_3")}`,content:U("Crontab.Script.index_4"),onConfirm:async()=>{await H({script_id:e.script_id}),G()}})}}]})]),F=[{key:"delete",type:"confirm",label:U("Crontab.Script.index_42"),confirm:{title:U("Crontab.Planned.index_16",[U("Crontab.Script.index_42")]),desc:U("Crontab.Planned.index_17",[U("Crontab.Script.index_42")]),columns:[M.value[1]],api:e=>H({script_id:e.script_id},!1),done:()=>{G()}}}],X=j({p:1,rows:10,search:""}),{loading:B,setLoading:Q}=m(!0);(async()=>{const{message:e}=await W();s(e)&&(S.value=e.map((e=>({label:e.name,key:e.type_id.toString()}))))})();const G=async()=>{try{Q(!0);const{message:t}=await(e=z({...X,type_id:f.value}),a.post("/crontab/script/get_script_list",{data:JSON.stringify(e)}));i(t)?(J.data=t.data.map((e=>({...e,id:e.script_id}))),J.total=r(t.page)):(J.data=[],J.total=0)}finally{L.value=[],Q(!1)}var e};G();const Y=(e,t)=>{y({title:U("Crontab.Planned.index_13"),content:U("Crontab.arrange.index_1",[t.name]),onConfirm:()=>{ae.data.row=t,ae.data.args=e,ae.show=!0}})},ee=x(U("Crontab.Script.index_1"),{getList:G}),te=x(),ae=x(U("Crontab.Planned.index_23"),{getList:G}),le=x(U("Crontab.Script.index_44"),{callback:Y});return(e,t)=>{const a=w,n=K,i=v,r=h,o=u,s=c,g=p,b=d,x=V;return $(),q(x,{class:"p-16px"},{default:O((()=>[P(a,{value:E(f),"onUpdate:value":[t[0]||(t[0]=e=>N(f)?f.value=e:null),G],options:E(S)},null,8,["value","options"]),P(g,null,{toolsLeft:O((()=>[P(n,{type:"primary",onClick:D},{default:O((()=>[A(R(e.$t("Crontab.Script.index_1")),1)])),_:1})])),toolsRight:O((()=>[P(i,{value:E(X).search,"onUpdate:value":t[1]||(t[1]=e=>E(X).search=e),placeholder:e.$t("WP.Sets.index_15"),onSearch:G},null,8,["value","placeholder"])])),table:O((()=>[P(r,{"checked-row-keys":E(L),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>N(L)?L.value=e:null),loading:E(B),data:E(J).data,columns:E(M)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:O((()=>[P(o,{"checked-row-keys":E(L),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>N(L)?L.value=e:null),data:E(J).data,options:F},null,8,["checked-row-keys","data"])])),pageRight:O((()=>[P(s,{page:E(X).p,"onUpdate:page":t[4]||(t[4]=e=>E(X).p=e),"page-size":E(X).rows,"onUpdate:pageSize":t[5]||(t[5]=e=>E(X).rows=e),"item-count":E(J).total,onRefresh:G},null,8,["page","page-size","item-count"])])),_:1}),P(b,{show:E(ee).show,"onUpdate:show":t[6]||(t[6]=e=>E(ee).show=e),title:E(ee).title,data:E(ee).data,width:600,footer:!0,component:Z},null,8,["show","title","data"]),P(b,{show:E(ae).show,"onUpdate:show":t[7]||(t[7]=e=>E(ae).show=e),title:E(ae).title,data:E(ae).data,width:400,"min-height":200,component:E(_)},null,8,["show","title","data","component"]),P(b,{show:E(le).show,"onUpdate:show":t[8]||(t[8]=e=>E(le).show=e),title:E(le).title,data:E(le).data,width:400,footer:!0,component:E(C)},null,8,["show","title","data","component"]),P(b,{show:E(te).show,"onUpdate:show":t[9]||(t[9]=e=>E(te).show=e),title:E(te).title,data:E(te).data,width:800,"min-height":550,footer:!1,component:E(l)},null,8,["show","title","data","component"])])),_:1})}}}),te=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));e("i",te)}}}));
