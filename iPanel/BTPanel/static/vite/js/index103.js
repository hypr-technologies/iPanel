import{_ as a,q as e}from"./public.js?v=1752142539265";import{T as s,_ as t,n as l,O as n}from"./page_layout.js?v=1752142539265";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang.js?v=1752142539265";import{u as i,B as p,C as r,D as u,E as m,F as c}from"./utils.js?v=1752142539265";import _ from"./backup-info.js?v=1752142539265";import{k as d,P as f,$ as g,r as x,e as b,a1 as k,X as v,a2 as y,Q as C,W as w,an as B,j,a3 as h,V as D}from"./vue.js?v=1752142539265";import{cz as $,aq as q,cD as R,_ as U,c3 as z}from"./naive.js?v=1752142539265";import"./common.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";import"./soft.js?v=1752142539265";const F=d({__name:"index",props:{onRefresh:{type:Function}},setup(d,{expose:U}){const{t:F}=f(),P=i(),{loading:E,backupData:H}=g(P),O=d,Q=x(null),T=b({back_name:p(Date.now()),storage_type:"local",timestamp:null,auto_exit:!1}),V={back_name:{required:!0,trigger:"input",message:F("Config.Backup.index_49")}},W=()=>{P.getData()};return P.getData(),U({onConfirm:async()=>{var a;return await(null==(a=Q.value)?void 0:a.validate()),new Promise((a=>{e({title:F("Config.Backup.index_57"),content:()=>C(z,{type:"warning"},{default:()=>[C("span",{class:"color-warning font-bold"},[j(" "),F("Config.Backup.index_58"),j(" ")])]}),onConfirm:async()=>{await c({backup_name:T.back_name,auto_exit:T.auto_exit?1:0,storage_type:T.storage_type,timestamp:T.timestamp?T.timestamp/1e3:0}),O.onRefresh(T.timestamp),a(!0)}})}))}}),(e,i)=>{const p=q,c=$,d=R,f=s,g=o,x=t,b=a,j=n;return v(),k(j,{show:w(E),class:"p-16px",description:w(F)("Config.Backup.index_56")},{default:y((()=>[C(g,{ref_key:"formRef",ref:Q,model:w(T),rules:V},{default:y((()=>[C(c,{label:e.$t("Config.Backup.index_3"),path:"back_name"},{default:y((()=>[C(p,{class:"w-600px!",value:w(T).back_name,"onUpdate:value":i[0]||(i[0]=a=>w(T).back_name=a),placeholder:w(F)("Config.Backup.index_49"),clearable:""},null,8,["value","placeholder"])])),_:1},8,["label"]),C(c,{label:e.$t("Config.Backup.index_50"),path:"type"},{default:y((()=>[C(d,{class:"w-600px",value:w(T).storage_type,"onUpdate:value":i[1]||(i[1]=a=>w(T).storage_type=a),options:w(u),"render-label":w(r)},null,8,["value","options","render-label"])])),_:1},8,["label"]),C(c,{label:e.$t("Config.Backup.index_51")},{default:y((()=>[C(f,{class:"w-600px",value:w(T).timestamp,"onUpdate:value":i[2]||(i[2]=a=>w(T).timestamp=a),type:"datetime",clearable:"","is-date-disabled":w(m),placeholder:w(F)("Config.Backup.index_52")},null,8,["value","is-date-disabled","placeholder"])])),_:1},8,["label"]),C(c,{label:"Backup Data"},{default:y((()=>[C(_,{class:"w-600px"})])),_:1}),B("",!0)])),_:1},8,["model"]),C(b,{class:"mt-16px"},{default:y((()=>[D("li",null,[C(x,{name:"base-warning",class:"text-warning mr-4px",size:"16"}),D("span",null,h(w(F)("Config.Backup.index_54"))+" "+h(w(l)(w(H).disk_use))+" "+h(w(F)("Config.Backup.index_55"))+" "+h(w(l)(w(H).disk_free)),1),C(x,{name:"base-refresh",class:"text-primary ml-4px",onClick:W})])])),_:1})])),_:1},8,["show","description"])}}});export{F as default};
